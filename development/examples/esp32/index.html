

<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/hf-as5047u-driver/development/assets/css/just-the-docs-default.css">

  <link rel="stylesheet" href="/hf-as5047u-driver/development/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet">

  <style id="jtd-nav-activation">
  

    
    .site-nav > ul.nav-list:first-child > li:not(:nth-child(2)) > a,
    .site-nav > ul.nav-list:first-child > li > ul > li a {
      background-image: none;
    }

    .site-nav > ul.nav-list:not(:first-child) a,
    .site-nav li.external a {
      background-image: none;
    }

    .site-nav > ul.nav-list:first-child > li:nth-child(2) > a {
      font-weight: 600;
      text-decoration: none;
    }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg {
      transform: rotate(-90deg);
    }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list {
      display: block;
    }
  </style>

  

  
    <script src="/hf-as5047u-driver/development/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/hf-as5047u-driver/development/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>AS5047U ESP32-C6 Examples | HardFOC AS5047U Driver - development</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="AS5047U ESP32-C6 Examples" />
<meta name="author" content="N3b3x" />
<meta property="og:locale" content="en" />
<meta name="description" content="Portable C++20 driver for the AS5047U magnetic encoder from ams with 14-bit absolute angle readings, optional CRC protection, Dynamic Angle Error Compensation (DAEC), and adaptive Dynamic Filter System (DFS‚Ñ¢)" />
<meta property="og:description" content="Portable C++20 driver for the AS5047U magnetic encoder from ams with 14-bit absolute angle readings, optional CRC protection, Dynamic Angle Error Compensation (DAEC), and adaptive Dynamic Filter System (DFS‚Ñ¢)" />
<link rel="canonical" href="https://n3b3x.github.io/hf-as5047u-driver/development/examples/esp32/" />
<meta property="og:url" content="https://n3b3x.github.io/hf-as5047u-driver/development/examples/esp32/" />
<meta property="og:site_name" content="HardFOC AS5047U Driver - development" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="AS5047U ESP32-C6 Examples" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"N3b3x","url":"https://github.com/n3b3x"},"description":"Portable C++20 driver for the AS5047U magnetic encoder from ams with 14-bit absolute angle readings, optional CRC protection, Dynamic Angle Error Compensation (DAEC), and adaptive Dynamic Filter System (DFS‚Ñ¢)","headline":"AS5047U ESP32-C6 Examples","url":"https://n3b3x.github.io/hf-as5047u-driver/development/examples/esp32/"}</script>
<!-- End Jekyll SEO tag -->


  <!-- =============================================================================
     Custom Head Content for HardFOC Driver Documentation
     =============================================================================
     This file is included in the <head> section of every page.
     It loads custom CSS and JavaScript for enhanced functionality.
     ============================================================================= -->

<!-- Custom CSS for enhanced styling and fixes -->
<link rel="stylesheet" href="/hf-as5047u-driver/development/assets/css/custom.css">

<!-- Custom JavaScript for interactive features -->
<script src="/hf-as5047u-driver/development/assets/js/custom.js" defer></script>



</head>

<body>
  <a class="skip-to-main" href="#main-content">Skip to main content</a>
  <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="svg-link" viewBox="0 0 24 24">
  <title>Link</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
  </svg>
</symbol>

  <symbol id="svg-menu" viewBox="0 0 24 24">
  <title>Menu</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
    <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
  </svg>
</symbol>

  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
  <title>Expand</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
    <polyline points="9 18 15 12 9 6"></polyline>
  </svg>
</symbol>

  <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE -->
<symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link">
  <title id="svg-external-link-title">(external link)</title>
  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>
</symbol>

  
    <symbol id="svg-doc" viewBox="0 0 24 24">
  <title>Document</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
  </svg>
</symbol>

    <symbol id="svg-search" viewBox="0 0 24 24">
  <title>Search</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
    <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
  </svg>
</symbol>

  
  
    <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md -->
<symbol id="svg-copy" viewBox="0 0 16 16">
  <title>Copy</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
  </svg>
</symbol>
<symbol id="svg-copied" viewBox="0 0 16 16">
  <title>Copied</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16">
    <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/>
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/>
  </svg>
</symbol>

  
</svg>

  
    <div class="side-bar">
  <div class="site-header" role="banner">
    <a href="/hf-as5047u-driver/development/" class="site-title lh-tight">
  HardFOC AS5047U Driver - development

</a>
    <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false">
      <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg>
    </button>
  </div>

  <nav aria-label="Main" id="site-nav" class="site-nav">
  
  
    <ul class="nav-list"><li class="nav-list-item"><a href="/hf-as5047u-driver/development/" class="nav-list-link">HardFOC AS5047U Driver</a></li><li class="nav-list-item"><a href="/hf-as5047u-driver/development/examples/esp32/" class="nav-list-link">AS5047U ESP32-C6 Examples</a></li><li class="nav-list-item"><a href="/hf-as5047u-driver/development/docs/" class="nav-list-link">HF-AS5047U Documentation</a></li><li class="nav-list-item"><a href="/hf-as5047u-driver/development/docs/examples.html" class="nav-list-link">üéÆ Running the Examples</a></li><li class="nav-list-item"><a href="/hf-as5047u-driver/development/docs/workflow.html" class="nav-list-link">üèÅ Quick Start Workflow</a></li><li class="nav-list-item"><a href="/hf-as5047u-driver/development/docs/usage.html" class="nav-list-link">üìö Using the Library</a></li><li class="nav-list-item"><a href="/hf-as5047u-driver/development/docs/setup.html" class="nav-list-link">üõ†Ô∏è Setup</a></li><li class="nav-list-item"><a href="/hf-as5047u-driver/development/docs/building.html" class="nav-list-link">üß∞ Building and Testing</a></li></ul>
  
</nav>




  
  
    <footer class="site-footer">
      This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  
</div>

  
  <div class="main" id="top">
    <div id="main-header" class="main-header">
  
    

<div class="search" role="search">
  <div class="search-input-wrap">
    <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search HardFOC AS5047U Driver - development" aria-label="Search HardFOC AS5047U Driver - development" autocomplete="off">
    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
  </div>
  <div id="search-results" class="search-results"></div>
</div>

  
  
  
    <nav aria-label="Auxiliary" class="aux-nav">
  <ul class="aux-nav-list">
    
      <li class="aux-nav-list-item">
        <a href="/hf-as5047u-driver/development/api/index.html" class="site-button"
          
        >
          üìñ API Reference
        </a>
      </li>
    
      <li class="aux-nav-list-item">
        <a href="https://github.com/n3b3x/hf-as5047u-driver" class="site-button"
          
        >
          üìö GitHub Repository
        </a>
      </li>
    
      <li class="aux-nav-list-item">
        <a href="https://github.com/n3b3x/hf-as5047u-driver/issues" class="site-button"
          
        >
          üêõ Report Issues
        </a>
      </li>
    
      <li class="aux-nav-list-item">
        <a href="https://github.com/n3b3x/hf-as5047u-driver/stargazers" class="site-button"
          
        >
          ‚≠ê Star on GitHub
        </a>
      </li>
    
  </ul>
</nav>

  
</div>

    <div class="main-content-wrap">
      
      <div id="main-content" class="main-content">
        <main>
          
            <h1 id="as5047u-esp32-c6-examples">
  
  
    <a href="#as5047u-esp32-c6-examples" class="anchor-heading" aria-labelledby="as5047u-esp32-c6-examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> AS5047U ESP32-C6 Examples
  
  
</h1>
    

<p>This directory contains comprehensive examples demonstrating the AS5047U driver on ESP32-C6 platform.</p>
<h2 id="-overview">
  
  
    <a href="#-overview" class="anchor-heading" aria-labelledby="-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üéØ Overview
  
  
</h2>
    

<p>The ESP32-C6 examples showcase real-world usage of the AS5047U magnetic encoder with:</p>

<ul>
  <li><strong>Hardware-specific HAL</strong> implementation for ESP32-C6</li>
  <li><strong>Multiple example applications</strong> covering different use cases</li>
  <li><strong>Automated build system</strong> with configurable app types</li>
  <li><strong>Comprehensive documentation</strong> for each example</li>
  <li><strong>Production-ready code</strong> with proper error handling</li>
</ul>
<h2 id="-hardware-requirements">
  
  
    <a href="#-hardware-requirements" class="anchor-heading" aria-labelledby="-hardware-requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üîß Hardware Requirements
  
  
</h2>
    
<h3 id="esp32-c6-development-board">
  
  
    <a href="#esp32-c6-development-board" class="anchor-heading" aria-labelledby="esp32-c6-development-board"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ESP32-C6 Development Board
  
  
</h3>
    
<ul>
  <li>ESP32-C6-DevKitC-1 or compatible</li>
  <li>USB-C cable for programming and power</li>
</ul>
<h3 id="as5047u-connections">
  
  
    <a href="#as5047u-connections" class="anchor-heading" aria-labelledby="as5047u-connections"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> AS5047U Connections
  
  
</h3>
    

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>AS5047U Pin</th>
      <th>ESP32-C6 GPIO</th>
      <th>Function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MISO</td>
      <td>GPIO2</td>
      <td>SPI Data In</td>
    </tr>
    <tr>
      <td>MOSI</td>
      <td>GPIO7</td>
      <td>SPI Data Out</td>
    </tr>
    <tr>
      <td>SCLK</td>
      <td>GPIO6</td>
      <td>SPI Clock</td>
    </tr>
    <tr>
      <td>CS</td>
      <td>GPIO10</td>
      <td>Chip Select</td>
    </tr>
    <tr>
      <td>VDD</td>
      <td>3.3V</td>
      <td>Logic Supply</td>
    </tr>
    <tr>
      <td>GND</td>
      <td>GND</td>
      <td>Ground</td>
    </tr>
  </tbody>
</table></div>

<p><strong>Note:</strong> The default SPI configuration uses mode 1 (CPOL=0, CPHA=1) at 4MHz.</p>
<h2 id="-quick-start">
  
  
    <a href="#-quick-start" class="anchor-heading" aria-labelledby="-quick-start"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üöÄ Quick Start
  
  
</h2>
    
<h3 id="1-prerequisites">
  
  
    <a href="#1-prerequisites" class="anchor-heading" aria-labelledby="1-prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Prerequisites
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c"># Install ESP-IDF v5.5</span>
curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/espressif/esp-idf/master/tools/install.sh | bash
<span class="nb">source</span> ~/esp/esp-idf/export.sh

<span class="c"># Verify installation</span>
idf.py <span class="nt">--version</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="2-setup-repository">
  
  
    <a href="#2-setup-repository" class="anchor-heading" aria-labelledby="2-setup-repository"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Setup Repository
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c"># Clone and setup</span>
git clone <span class="nt">--recursive</span> https://github.com/n3b3x/hf-as5047u-driver.git
<span class="nb">cd </span>hf-as5047u-driver/examples/esp32

<span class="c"># Initialize build environment</span>
./scripts/setup_repo.sh
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="3-build-and-flash">
  
  
    <a href="#3-build-and-flash" class="anchor-heading" aria-labelledby="3-build-and-flash"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Build and Flash
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c"># Build driver integration test (default)</span>
./scripts/build_app.sh driver_integration_test Release

<span class="c"># Flash to ESP32-C6</span>
./scripts/flash_app.sh driver_integration_test Release

<span class="c"># Monitor output</span>
idf.py monitor
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h2 id="-available-examples">
  
  
    <a href="#-available-examples" class="anchor-heading" aria-labelledby="-available-examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üì± Available Examples
  
  
</h2>
    
<h3 id="-test-suite">
  
  
    <a href="#-test-suite" class="anchor-heading" aria-labelledby="-test-suite"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üü¢ Test Suite
  
  
</h3>
    
<h4 id="driver_integration_test">
  
  
    <a href="#driver_integration_test" class="anchor-heading" aria-labelledby="driver_integration_test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">driver_integration_test</code>
  
  
</h4>
    
<p><strong>Comprehensive Driver Integration Test Suite</strong></p>
<ul>
  <li>Complete driver API validation (30+ tests)</li>
  <li>Multiple test sections covering all functionality</li>
  <li>Initialization, angle/velocity reading, diagnostics</li>
  <li>Frame format testing (16/24/32-bit)</li>
  <li>Configuration and error handling</li>
  <li>FreeRTOS task-based test execution</li>
  <li>GPIO14 progress indicator</li>
  <li>Automatic pass/fail tracking</li>
  <li>No actual hardware required (driver test only)</li>
</ul>

<p><strong>Build:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>./scripts/build_app.sh driver_integration_test Release
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="-basic-examples">
  
  
    <a href="#-basic-examples" class="anchor-heading" aria-labelledby="-basic-examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üü° Basic Examples
  
  
</h3>
    
<h4 id="basic_angle_reading">
  
  
    <a href="#basic_angle_reading" class="anchor-heading" aria-labelledby="basic_angle_reading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">basic_angle_reading</code>
  
  
</h4>
    
<p><strong>Basic Angle Reading Example</strong></p>
<ul>
  <li>Simple angle reading loop</li>
  <li>Angle in LSB and degrees</li>
  <li>AGC and magnitude diagnostics</li>
  <li>Error flag monitoring</li>
  <li>Real hardware testing</li>
</ul>

<p><strong>Build:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>./scripts/build_app.sh basic_angle_reading Release
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h4 id="velocity_reading">
  
  
    <a href="#velocity_reading" class="anchor-heading" aria-labelledby="velocity_reading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">velocity_reading</code>
  
  
</h4>
    
<p><strong>Velocity Reading Example</strong></p>
<ul>
  <li>Velocity reading in multiple units</li>
  <li>Degrees per second, radians per second, RPM</li>
  <li>Real hardware testing</li>
</ul>

<p><strong>Build:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>./scripts/build_app.sh velocity_reading Release
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h4 id="configuration_example">
  
  
    <a href="#configuration_example" class="anchor-heading" aria-labelledby="configuration_example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">configuration_example</code>
  
  
</h4>
    
<p><strong>Configuration Example</strong></p>
<ul>
  <li>ABI output configuration</li>
  <li>UVW commutation setup</li>
  <li>PWM output configuration</li>
  <li>Zero position and direction setting</li>
  <li>Real hardware testing</li>
</ul>

<p><strong>Build:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>./scripts/build_app.sh configuration_example Release
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h4 id="full_features">
  
  
    <a href="#full_features" class="anchor-heading" aria-labelledby="full_features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">full_features</code>
  
  
</h4>
    
<p><strong>Comprehensive Example</strong></p>
<ul>
  <li>All sensor features enabled</li>
  <li>Angle, velocity, diagnostics</li>
  <li>ABI, UVW, PWM configuration</li>
  <li>DAEC and filter settings</li>
  <li>OTP programming</li>
  <li>Real hardware testing</li>
</ul>

<p><strong>Build:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>./scripts/build_app.sh full_features Release
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h2 id="-building-examples">
  
  
    <a href="#-building-examples" class="anchor-heading" aria-labelledby="-building-examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üî® Building Examples
  
  
</h2>
    
<h3 id="using-build-scripts-recommended">
  
  
    <a href="#using-build-scripts-recommended" class="anchor-heading" aria-labelledby="using-build-scripts-recommended"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Build Scripts (Recommended)
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c"># List available app types</span>
./scripts/build_app.sh list

<span class="c"># Build specific app</span>
./scripts/build_app.sh &lt;app_type&gt; &lt;build_type&gt;

<span class="c"># Examples:</span>
./scripts/build_app.sh driver_integration_test Release
./scripts/build_app.sh basic_angle_reading Debug
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="using-esp-idf-directly">
  
  
    <a href="#using-esp-idf-directly" class="anchor-heading" aria-labelledby="using-esp-idf-directly"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using ESP-IDF Directly
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c"># Set app type and build type</span>
idf.py build <span class="nt">-DAPP_TYPE</span><span class="o">=</span>driver_integration_test <span class="nt">-DBUILD_TYPE</span><span class="o">=</span>Release

<span class="c"># Flash</span>
idf.py flash

<span class="c"># Monitor</span>
idf.py monitor
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h2 id="-test-framework">
  
  
    <a href="#-test-framework" class="anchor-heading" aria-labelledby="-test-framework"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üìä Test Framework
  
  
</h2>
    

<p>All test examples use a standardized test framework with:</p>

<ul>
  <li><strong>Test result tracking</strong> - Automatic pass/fail counting</li>
  <li><strong>Execution timing</strong> - Performance measurement</li>
  <li><strong>FreeRTOS task execution</strong> - Isolated test environments</li>
  <li><strong>GPIO14 progress indicator</strong> - Visual test progression</li>
  <li><strong>Standardized logging</strong> - Consistent output format</li>
</ul>
<h3 id="test-framework-features">
  
  
    <a href="#test-framework-features" class="anchor-heading" aria-labelledby="test-framework-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Test Framework Features
  
  
</h3>
    

<ul>
  <li><code class="language-plaintext highlighter-rouge">RUN_TEST(test_func)</code> - Run test inline</li>
  <li><code class="language-plaintext highlighter-rouge">RUN_TEST_IN_TASK(name, func, stack_size, priority)</code> - Run test in FreeRTOS task</li>
  <li><code class="language-plaintext highlighter-rouge">RUN_TEST_SECTION_IF_ENABLED(enabled, section_name, ...)</code> - Conditional test sections</li>
  <li><code class="language-plaintext highlighter-rouge">g_test_results</code> - Global test results tracking</li>
</ul>
<h2 id="-hardware-configuration">
  
  
    <a href="#-hardware-configuration" class="anchor-heading" aria-labelledby="-hardware-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üîå Hardware Configuration
  
  
</h2>
    
<h3 id="spi-configuration">
  
  
    <a href="#spi-configuration" class="anchor-heading" aria-labelledby="spi-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SPI Configuration
  
  
</h3>
    

<p>The default SPI configuration can be modified in the example files:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="n">Esp32As5047uBus</span><span class="o">::</span><span class="n">SPIConfig</span> <span class="n">config</span><span class="p">;</span>
<span class="n">config</span><span class="p">.</span><span class="n">miso_pin</span> <span class="o">=</span> <span class="n">GPIO_NUM_2</span><span class="p">;</span>      <span class="c1">// MISO pin</span>
<span class="n">config</span><span class="p">.</span><span class="n">mosi_pin</span> <span class="o">=</span> <span class="n">GPIO_NUM_7</span><span class="p">;</span>      <span class="c1">// MOSI pin</span>
<span class="n">config</span><span class="p">.</span><span class="n">sclk_pin</span> <span class="o">=</span> <span class="n">GPIO_NUM_6</span><span class="p">;</span>      <span class="c1">// SCLK pin</span>
<span class="n">config</span><span class="p">.</span><span class="n">cs_pin</span> <span class="o">=</span> <span class="n">GPIO_NUM_10</span><span class="p">;</span>       <span class="c1">// CS pin</span>
<span class="n">config</span><span class="p">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="mi">4000000</span><span class="p">;</span>        <span class="c1">// SPI frequency (4MHz)</span>
<span class="n">config</span><span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>                   <span class="c1">// SPI mode (1: CPOL=0, CPHA=1)</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="pin-configuration">
  
  
    <a href="#pin-configuration" class="anchor-heading" aria-labelledby="pin-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pin Configuration
  
  
</h3>
    

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>Function</th>
      <th>Default GPIO</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SPI MISO</td>
      <td>GPIO2</td>
      <td>Can be changed in code</td>
    </tr>
    <tr>
      <td>SPI MOSI</td>
      <td>GPIO7</td>
      <td>Can be changed in code</td>
    </tr>
    <tr>
      <td>SPI SCLK</td>
      <td>GPIO6</td>
      <td>Can be changed in code</td>
    </tr>
    <tr>
      <td>SPI CS</td>
      <td>GPIO10</td>
      <td>Can be changed in code</td>
    </tr>
    <tr>
      <td>Test Progress</td>
      <td>GPIO14</td>
      <td>Used by test framework</td>
    </tr>
  </tbody>
</table></div>
<h3 id="frame-formats">
  
  
    <a href="#frame-formats" class="anchor-heading" aria-labelledby="frame-formats"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Frame Formats
  
  
</h3>
    

<p>The AS5047U supports three SPI frame formats:</p>

<ul>
  <li><strong>SPI_16</strong> - 16-bit frames (no CRC, high-throughput mode)</li>
  <li><strong>SPI_24</strong> - 24-bit frames (includes 8-bit CRC for reliability) - <strong>Recommended</strong></li>
  <li><strong>SPI_32</strong> - 32-bit frames (includes 8-bit CRC and 8-bit pad for daisy-chain)</li>
</ul>
<h2 id="-documentation">
  
  
    <a href="#-documentation" class="anchor-heading" aria-labelledby="-documentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üìö Documentation
  
  
</h2>
    

<p>For more detailed documentation, see:</p>

<ul>
  <li><a href="/hf-as5047u-driver/development/">Main Driver README</a></li>
  <li><a href="/hf-as5047u-driver/development/docs/setup.html">Setup Guide</a></li>
  <li><a href="/hf-as5047u-driver/development/docs/usage.html">Usage Guide</a></li>
  <li><a href="/hf-as5047u-driver/development/docs/examples.html">Examples Guide</a></li>
  <li><a href="/hf-as5047u-driver/development/docs/building.html">Building Guide</a></li>
</ul>
<h2 id="-troubleshooting">
  
  
    <a href="#-troubleshooting" class="anchor-heading" aria-labelledby="-troubleshooting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üêõ Troubleshooting
  
  
</h2>
    
<h3 id="build-issues">
  
  
    <a href="#build-issues" class="anchor-heading" aria-labelledby="build-issues"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build Issues
  
  
</h3>
    

<p><strong>Error: ‚ÄúAPP_TYPE not defined‚Äù</strong></p>
<ul>
  <li>Use the build scripts: <code class="language-plaintext highlighter-rouge">./scripts/build_app.sh &lt;app_type&gt; &lt;build_type&gt;</code></li>
  <li>Or set manually: <code class="language-plaintext highlighter-rouge">idf.py build -DAPP_TYPE=driver_integration_test -DBUILD_TYPE=Release</code></li>
</ul>

<p><strong>Error: ‚ÄúFailed to read valid app types from app_config.yml‚Äù</strong></p>
<ul>
  <li>Ensure the scripts submodule is initialized: <code class="language-plaintext highlighter-rouge">git submodule update --init --recursive</code></li>
  <li>Check that <code class="language-plaintext highlighter-rouge">scripts/get_app_info.py</code> exists</li>
</ul>
<h3 id="runtime-issues">
  
  
    <a href="#runtime-issues" class="anchor-heading" aria-labelledby="runtime-issues"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Runtime Issues
  
  
</h3>
    

<p><strong>SPI Communication Errors</strong></p>
<ul>
  <li>Check wiring connections (MISO, MOSI, SCLK, CS, GND, VDD)</li>
  <li>Verify SPI mode (default is mode 1: CPOL=0, CPHA=1)</li>
  <li>Check SPI frequency (default is 4MHz)</li>
  <li>Verify chip select is properly configured</li>
</ul>

<p><strong>No Angle Data</strong></p>
<ul>
  <li>Ensure encoder is powered (3.3V)</li>
  <li>Check magnetic field is present (magnitude should be &gt; 0)</li>
  <li>Verify SPI communication (check error flags)</li>
  <li>Ensure proper SPI frame format (24-bit recommended)</li>
</ul>

<p><strong>CRC Errors</strong></p>
<ul>
  <li>Use 24-bit or 32-bit frame format (includes CRC)</li>
  <li>Check SPI signal integrity</li>
  <li>Verify SPI timing and frequency</li>
</ul>

<p><strong>Initialization Failures</strong></p>
<ul>
  <li>Check SPI bus initialization</li>
  <li>Verify chip select pin configuration</li>
  <li>Ensure proper power supply (3.3V)</li>
  <li>Check for SPI bus conflicts</li>
</ul>
<h2 id="-license">
  
  
    <a href="#-license" class="anchor-heading" aria-labelledby="-license"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üìù License
  
  
</h2>
    

<p>See the main driver <a href="/hf-as5047u-driver/development/LICENSE">LICENSE</a> file.</p>
<h2 id="-contributing">
  
  
    <a href="#-contributing" class="anchor-heading" aria-labelledby="-contributing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ü§ù Contributing
  
  
</h2>
    

<p>See the main driver <a href="/hf-as5047u-driver/development/docs/">Contributing Guide</a>.</p><hr />

<p><strong>For questions or issues, please open an issue on GitHub.</strong></p>

          

          
            
          
        </main>
        

  <hr>
  <footer>
    

    <!-- =============================================================================
     Custom Footer Content for HardFOC Driver Documentation
     =============================================================================
     This footer is displayed at the bottom of every page.
     ============================================================================= -->

<footer class="site-footer">
  <div class="site-footer-credits">
    <p>Built with ‚ù§Ô∏è using <a href="https://just-the-docs.github.io/just-the-docs/">Just the Docs</a></p>
    <p>
      <a href="https://github.com/n3b3x/hf-as5047u-driver/development/blob/main/LICENSE">GPL v3 License</a> ‚Ä¢ 
      <a href="https://github.com/n3b3x/hf-as5047u-driver/development">View on GitHub</a>
    </p>
  </div>
</footer>



    
  </footer>


      </div>
    </div>
    
      
<button id="search-button" class="search-button btn-reset" aria-label="Focus on search">
  <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-search"></use></svg>
</button>


<div class="search-overlay"></div>

    
  </div>

  
</body>
</html>

