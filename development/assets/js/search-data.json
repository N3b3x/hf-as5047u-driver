{"0": {
    "doc": "HardFOC AS5047U Driver",
    "title": "HF-AS5047U Driver",
    "content": "Portable C++20 driver for the AS5047U magnetic encoder from ams with SPI interface, CRC protection, DAEC, and DFS‚Ñ¢ . ",
    "url": "/hf-as5047u-driver/development/#hf-as5047u-driver",
    
    "relUrl": "/#hf-as5047u-driver"
  },"1": {
    "doc": "HardFOC AS5047U Driver",
    "title": "üìö Table of Contents",
    "content": ". | Overview | Features | Quick Start | Installation | API Reference | Examples | Documentation | Contributing | License | . ",
    "url": "/hf-as5047u-driver/development/#-table-of-contents",
    
    "relUrl": "/#-table-of-contents"
  },"2": {
    "doc": "HardFOC AS5047U Driver",
    "title": "üì¶ Overview",
    "content": "üìñ üìöüåê Live Complete Documentation - Interactive guides, examples, and step-by-step tutorials . HF-AS5047U is a portable C++20 driver for the AS5047U magnetic encoder from ams. It delivers fast 14‚Äëbit absolute angle readings over SPI, optional CRC protection and advanced features like Dynamic Angle Error Compensation (DAEC) and an adaptive Dynamic Filter System (DFS‚Ñ¢). The sensor can also output incremental (A/B/I) and 3‚Äëphase commutation (UVW) signals or a PWM encoded angle, making it a drop‚Äëin replacement for optical encoders in high-performance motor control and robotics. The driver uses a CRTP-based SpiInterface for hardware abstraction, allowing it to run on any platform (ESP32, STM32, Arduino, etc.) with zero runtime overhead. It implements all major features from the AS5047U datasheet including absolute angle readout with/without DAEC, velocity measurement, AGC and magnetic field diagnostics, ABI/UVW/PWM interface configuration, error/status flag handling, and full OTP programming sequence. ",
    "url": "/hf-as5047u-driver/development/#-overview",
    
    "relUrl": "/#-overview"
  },"3": {
    "doc": "HardFOC AS5047U Driver",
    "title": "‚ú® Features",
    "content": ". | ‚úÖ 14-bit absolute angle with optional CRC check | ‚úÖ DAEC (Dynamic Angle Error Compensation) for low-latency angle correction | ‚úÖ DFS‚Ñ¢ (Dynamic Filter System) adaptive noise filtering | ‚úÖ Stray-field immunity for robust operation | ‚úÖ Incremental ABI outputs up to 4096 PPR | ‚úÖ UVW commutation with programmable pole pairs | ‚úÖ PWM output option | ‚úÖ Diagnostics for AGC, magnitude and error flags | ‚úÖ OTP memory for permanent configuration | ‚úÖ Hardware Agnostic: SPI interface for platform independence | ‚úÖ Modern C++: C++20 with CRTP-based design | ‚úÖ Zero Overhead: CRTP-based design for compile-time polymorphism | . ",
    "url": "/hf-as5047u-driver/development/#-features",
    
    "relUrl": "/#-features"
  },"4": {
    "doc": "HardFOC AS5047U Driver",
    "title": "üöÄ Quick Start",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 . | #include \"as5047u.hpp\" // 1. Implement the SPI interface (see platform_integration.md) class MySpi : public as5047u::SpiInterface&lt;MySpi&gt; { public: void transfer(const uint8_t* tx, uint8_t* rx, size_t len) { // Your SPI transfer implementation } }; // 2. Create driver instance MySpi spi; as5047u::AS5047U encoder(spi, FrameFormat::SPI_24); // 24-bit frames with CRC // 3. Read angle uint16_t angle = encoder.GetAngle(); // compensated angle uint16_t rawAngle = encoder.GetRawAngle(); // raw angle without DAEC int16_t vel = encoder.GetVelocity(); // velocity in sensor units float vel_dps = encoder.GetVelocityDegPerSec(); // velocity in deg/s // 4. Diagnostics uint8_t agc = encoder.GetAGC(); // automatic gain control uint16_t mag = encoder.GetMagnitude(); // magnetic magnitude uint16_t errors = encoder.GetErrorFlags(); // current error flags . | . For detailed setup, see Installation and Quick Start Guide. ",
    "url": "/hf-as5047u-driver/development/#-quick-start",
    
    "relUrl": "/#-quick-start"
  },"5": {
    "doc": "HardFOC AS5047U Driver",
    "title": "üîß Installation",
    "content": ". | Clone or copy the driver files into your project | Implement the SPI interface for your platform (see Platform Integration) | Include the header in your code: | 1 . | #include \"as5047u.hpp\" . | . | Compile with a C++20 or newer compiler | . For detailed installation instructions, see docs/installation.md. ",
    "url": "/hf-as5047u-driver/development/#-installation",
    
    "relUrl": "/#-installation"
  },"6": {
    "doc": "HardFOC AS5047U Driver",
    "title": "üìñ API Reference",
    "content": "| Method | Description | . | GetAngle() | Read 14-bit compensated absolute angle | . | GetRawAngle() | Read 14-bit raw absolute angle | . | GetVelocity() | Read signed 14-bit velocity (LSB units) | . | GetVelocityDegPerSec() | Velocity in degrees/sec | . | GetVelocityRPM() | Velocity in revolutions per minute | . | GetAGC() | Read AGC (0‚Äì255) value | . | GetMagnitude() | Read magnetic field magnitude | . | GetErrorFlags() | Read and clear error/status flags | . | SetZeroPosition() | Set new zero offset | . | SetDirection() | Set rotation direction (CW or CCW) | . | SetABIResolution() | Set ABI output resolution (10‚Äì14 bits) | . | SetUVWPolePairs() | Set UVW pole pairs (1‚Äì7) | . | ConfigureInterface() | Enable/disable ABI, UVW, PWM | . | SetDynamicAngleCompensation() | Enable/disable DAEC | . | SetAdaptiveFilter() | Enable/disable adaptive filter (DFS) | . | ProgramOTP() | Program current settings into OTP | . For complete API documentation, see docs/api_reference.md. ",
    "url": "/hf-as5047u-driver/development/#-api-reference",
    
    "relUrl": "/#-api-reference"
  },"7": {
    "doc": "HardFOC AS5047U Driver",
    "title": "üìä Examples",
    "content": "For ESP32 examples, see the examples/esp32 directory. Additional examples for other platforms are available in the examples directory. Detailed example walkthroughs are available in docs/examples.md. ",
    "url": "/hf-as5047u-driver/development/#-examples",
    
    "relUrl": "/#-examples"
  },"8": {
    "doc": "HardFOC AS5047U Driver",
    "title": "üìö Documentation",
    "content": "For complete documentation, see the docs directory. ",
    "url": "/hf-as5047u-driver/development/#-documentation",
    
    "relUrl": "/#-documentation"
  },"9": {
    "doc": "HardFOC AS5047U Driver",
    "title": "ü§ù Contributing",
    "content": "Pull requests and suggestions are welcome! Please follow the existing code style and include tests for new features. ",
    "url": "/hf-as5047u-driver/development/#-contributing",
    
    "relUrl": "/#-contributing"
  },"10": {
    "doc": "HardFOC AS5047U Driver",
    "title": "üìÑ License",
    "content": "This project is licensed under the GNU General Public License v3.0. See the LICENSE file for details. ",
    "url": "/hf-as5047u-driver/development/#-license",
    
    "relUrl": "/#-license"
  },"11": {
    "doc": "HardFOC AS5047U Driver",
    "title": "HardFOC AS5047U Driver",
    "content": " ",
    "url": "/hf-as5047u-driver/development/",
    
    "relUrl": "/"
  },"12": {
    "doc": "üìñ API Reference",
    "title": "API Reference",
    "content": "Complete reference documentation for all public methods and types in the AS5047U driver. ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#api-reference",
    
    "relUrl": "/docs/api_reference/#api-reference"
  },"13": {
    "doc": "üìñ API Reference",
    "title": "Source Code",
    "content": ". | Main Header: inc/as5047u.hpp | SPI Interface: inc/as5047u_spi_interface.hpp | Implementation: src/as5047u.cpp | Registers: inc/as5047u_registers.hpp | . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#source-code",
    
    "relUrl": "/docs/api_reference/#source-code"
  },"14": {
    "doc": "üìñ API Reference",
    "title": "Core Class",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#core-class",
    
    "relUrl": "/docs/api_reference/#core-class"
  },"15": {
    "doc": "üìñ API Reference",
    "title": "AS5047U&lt;SpiType&gt;",
    "content": "Main driver class for interfacing with the AS5047U magnetic encoder. Template Parameter: SpiType - Type implementing as5047u::SpiInterface&lt;SpiType&gt; . Location: inc/as5047u.hpp#L78 . Constructor: . | 1 . | explicit AS5047U(SpiType&amp; bus, FrameFormat format = AS5047U_CFG::DEFAULT_FRAME_FORMAT) noexcept; . | . Location: inc/as5047u.hpp#L91 . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#as5047uspitype",
    
    "relUrl": "/docs/api_reference/#as5047uspitype"
  },"16": {
    "doc": "üìñ API Reference",
    "title": "Methods",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#methods",
    
    "relUrl": "/docs/api_reference/#methods"
  },"17": {
    "doc": "üìñ API Reference",
    "title": "Frame Format",
    "content": "| Method | Signature | Location | . | SetFrameFormat() | void SetFrameFormat(FrameFormat format) noexcept | src/as5047u.cpp#L16 | . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#frame-format",
    
    "relUrl": "/docs/api_reference/#frame-format"
  },"18": {
    "doc": "üìñ API Reference",
    "title": "Angle Reading",
    "content": "| Method | Signature | Location | . | GetAngle() | uint16_t GetAngle(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L33 | . | GetRawAngle() | uint16_t GetRawAngle(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L48 | . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#angle-reading",
    
    "relUrl": "/docs/api_reference/#angle-reading"
  },"19": {
    "doc": "üìñ API Reference",
    "title": "Velocity Reading",
    "content": "| Method | Signature | Location | . | GetVelocity() | int16_t GetVelocity(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L63 | . | GetVelocityDegPerSec() | float GetVelocityDegPerSec(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L79 | . | GetVelocityRadPerSec() | float GetVelocityRadPerSec(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L84 | . | GetVelocityRPM() | float GetVelocityRPM(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L89 | . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#velocity-reading",
    
    "relUrl": "/docs/api_reference/#velocity-reading"
  },"20": {
    "doc": "üìñ API Reference",
    "title": "Diagnostics",
    "content": "| Method | Signature | Location | . | GetAGC() | uint8_t GetAGC(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L94 | . | GetMagnitude() | uint16_t GetMagnitude(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L109 | . | GetErrorFlags() | uint16_t GetErrorFlags(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L124 | . | GetStickyErrorFlags() | AS5047U_Error GetStickyErrorFlags() const | inc/as5047u.hpp#L384 | . | DumpStatus() | void DumpStatus() const | src/as5047u.cpp#L597 | . | GetDiagnostics() | AS5047U_REG::DIA GetDiagnostics() const | src/as5047u.cpp#L393 | . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#diagnostics",
    
    "relUrl": "/docs/api_reference/#diagnostics"
  },"21": {
    "doc": "üìñ API Reference",
    "title": "Configuration",
    "content": "| Method | Signature | Location | . | GetZeroPosition() | uint16_t GetZeroPosition(uint8_t retries = AS5047U_CFG::CRC_RETRIES) const | src/as5047u.cpp#L135 | . | SetZeroPosition() | bool SetZeroPosition(uint16_t angle_lsb, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L162 | . | SetDirection() | bool SetDirection(bool clockwise, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | inc/as5047u.hpp#L214 | . | SetABIResolution() | bool SetABIResolution(uint8_t resolution_bits, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L171 | . | SetUVWPolePairs() | bool SetUVWPolePairs(uint8_t pairs, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L179 | . | SetIndexPulseLength() | bool SetIndexPulseLength(uint8_t lsb_len, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L187 | . | ConfigureInterface() | bool ConfigureInterface(bool abi, bool uvw, bool pwm, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L205 | . | SetDynamicAngleCompensation() | bool SetDynamicAngleCompensation(bool enable, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L225 | . | SetAdaptiveFilter() | bool SetAdaptiveFilter(bool enable, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L232 | . | SetFilterParameters() | bool SetFilterParameters(uint8_t k_min, uint8_t k_max, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L239 | . | Set150CTemperatureMode() | bool Set150CTemperatureMode(bool enable, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L250 | . | SetHysteresis() | bool SetHysteresis(AS5047U_REG::SETTINGS3::Hysteresis hysteresis, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L315 | . | GetHysteresis() | AS5047U_REG::SETTINGS3::Hysteresis GetHysteresis() const | src/as5047u.cpp#L322 | . | SetAngleOutputSource() | bool SetAngleOutputSource(AS5047U_REG::SETTINGS2::AngleOutputSource source, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | src/as5047u.cpp#L333 | . | GetAngleOutputSource() | AS5047U_REG::SETTINGS2::AngleOutputSource GetAngleOutputSource() const | src/as5047u.cpp#L340 | . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#configuration",
    
    "relUrl": "/docs/api_reference/#configuration"
  },"22": {
    "doc": "üìñ API Reference",
    "title": "OTP Programming",
    "content": "| Method | Signature | Location | . | ProgramOTP() | bool ProgramOTP() | src/as5047u.cpp#L257 | . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#otp-programming",
    
    "relUrl": "/docs/api_reference/#otp-programming"
  },"23": {
    "doc": "üìñ API Reference",
    "title": "Utility",
    "content": "| Method | Signature | Location | . | SetPad() | void SetPad(uint8_t pad) noexcept | src/as5047u.cpp#L302 | . | ComputeCRC8() | static constexpr uint8_t ComputeCRC8(uint16_t data16) | inc/as5047u.hpp#L96 | . | ReadReg() | template&lt;typename RegT&gt; RegT ReadReg() const | inc/as5047u.hpp#L360 | . | WriteReg() | template&lt;typename RegT&gt; bool WriteReg(const RegT&amp; reg, uint8_t retries = AS5047U_CFG::CRC_RETRIES) | inc/as5047u.hpp#L376 | . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#utility",
    
    "relUrl": "/docs/api_reference/#utility"
  },"24": {
    "doc": "üìñ API Reference",
    "title": "Types",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#types",
    
    "relUrl": "/docs/api_reference/#types"
  },"25": {
    "doc": "üìñ API Reference",
    "title": "Enumerations",
    "content": "| Type | Values | Location | . | FrameFormat | SPI_16, SPI_24, SPI_32 | inc/as5047u_types.hpp#L15 | . | AS5047U_Error | None, AgcWarning, MagHalf, CrcError, FramingError, CommandError, WatchdogError, OffCompError, CordicOverflow | inc/as5047u.hpp#L32 | . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#enumerations",
    
    "relUrl": "/docs/api_reference/#enumerations"
  },"26": {
    "doc": "üìñ API Reference",
    "title": "Structures",
    "content": "| Type | Description | Location | . | AS5047U_REG::DIA | Diagnostic register structure | inc/as5047u_registers.hpp | . | AS5047U_REG::SETTINGS2::AngleOutputSource | Angle output source enumeration | inc/as5047u_registers.hpp | . | AS5047U_REG::SETTINGS3::Hysteresis | Hysteresis enumeration | inc/as5047u_registers.hpp | . Navigation ‚¨ÖÔ∏è Configuration | Next: Examples ‚û°Ô∏è | Back to Index . ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/#structures",
    
    "relUrl": "/docs/api_reference/#structures"
  },"27": {
    "doc": "üìñ API Reference",
    "title": "üìñ API Reference",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/api_reference/",
    
    "relUrl": "/docs/api_reference/"
  },"28": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Configuration",
    "content": "This guide covers all configuration options available for the AS5047U driver. ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#configuration",
    
    "relUrl": "/docs/configuration/#configuration"
  },"29": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Compile-Time Configuration",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#compile-time-configuration",
    
    "relUrl": "/docs/configuration/#compile-time-configuration"
  },"30": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Kconfig Options",
    "content": "If your project uses Kconfig (e.g., ESP-IDF), the following options are available: . | 1 2 3 . | AS5047U Configuration AS5047U_FRAME_FORMAT (16/24/32-bit) AS5047U_CRC_RETRIES (default: 0) . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#kconfig-options",
    
    "relUrl": "/docs/configuration/#kconfig-options"
  },"31": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Configuration Header",
    "content": "You can also configure the driver by editing inc/as5047u_config.hpp: . | 1 2 3 4 5 6 7 . | namespace AS5047U_CFG { // Default SPI frame format inline constexpr FrameFormat DEFAULT_FRAME_FORMAT = FrameFormat::SPI_24; // Number of CRC retries (0 = no retry) inline constexpr uint8_t CRC_RETRIES = 3; } . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#configuration-header",
    
    "relUrl": "/docs/configuration/#configuration-header"
  },"32": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Runtime Configuration",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#runtime-configuration",
    
    "relUrl": "/docs/configuration/#runtime-configuration"
  },"33": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "SPI Frame Format",
    "content": "The driver supports three SPI frame formats: . | 1 2 3 4 5 6 7 8 . | // 16-bit frames (no CRC, highest throughput) as5047u::AS5047U encoder(spi, FrameFormat::SPI_16); // 24-bit frames (includes 8-bit CRC, recommended) as5047u::AS5047U encoder(spi, FrameFormat::SPI_24); // 32-bit frames (includes 8-bit CRC + 8-bit pad for daisy-chain) as5047u::AS5047U encoder(spi, FrameFormat::SPI_32); . | . Recommendation: Use SPI_24 for most applications - it provides CRC protection with good throughput. ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#spi-frame-format",
    
    "relUrl": "/docs/configuration/#spi-frame-format"
  },"34": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Change Frame Format at Runtime",
    "content": "| 1 . | encoder.SetFrameFormat(FrameFormat::SPI_24); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#change-frame-format-at-runtime",
    
    "relUrl": "/docs/configuration/#change-frame-format-at-runtime"
  },"35": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Sensor Configuration",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#sensor-configuration",
    
    "relUrl": "/docs/configuration/#sensor-configuration"
  },"36": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Zero Position",
    "content": "Set the zero reference position (soft offset): . | 1 2 3 4 5 6 . | // Set zero position to current angle uint16_t current_angle = encoder.GetAngle(); encoder.SetZeroPosition(current_angle); // Or set a specific value (0-16383) encoder.SetZeroPosition(8192); // 180 degrees . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#zero-position",
    
    "relUrl": "/docs/configuration/#zero-position"
  },"37": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Rotation Direction",
    "content": "| 1 2 3 4 5 . | // Clockwise rotation yields increasing angle (default) encoder.SetDirection(true); // Counter-clockwise rotation yields increasing angle encoder.SetDirection(false); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#rotation-direction",
    
    "relUrl": "/docs/configuration/#rotation-direction"
  },"38": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Dynamic Angle Error Compensation (DAEC)",
    "content": "DAEC provides low-latency angle correction for high-speed applications: . | 1 2 3 4 5 . | // Enable DAEC (recommended for high-speed applications) encoder.SetDynamicAngleCompensation(true); // Disable DAEC (use raw angle) encoder.SetDynamicAngleCompensation(false); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#dynamic-angle-error-compensation-daec",
    
    "relUrl": "/docs/configuration/#dynamic-angle-error-compensation-daec"
  },"39": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Adaptive Filter (DFS‚Ñ¢)",
    "content": "The Dynamic Filter System adaptively filters noise: . | 1 2 3 4 5 6 7 . | // Enable adaptive filter encoder.SetAdaptiveFilter(true); // Set filter parameters (K_min, K_max) // K_min: minimum filter strength (0-15) // K_max: maximum filter strength (0-15) encoder.SetFilterParameters(2, 3); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#adaptive-filter-dfs",
    
    "relUrl": "/docs/configuration/#adaptive-filter-dfs"
  },"40": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Angle Output Source",
    "content": "Select which angle is used for outputs (ABI, UVW, PWM): . | 1 2 3 4 5 . | // Use compensated angle (with DAEC) encoder.SetAngleOutputSource(AS5047U_REG::SETTINGS2::AngleOutputSource::Compensated); // Use raw angle (without DAEC) encoder.SetAngleOutputSource(AS5047U_REG::SETTINGS2::AngleOutputSource::Raw); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#angle-output-source",
    
    "relUrl": "/docs/configuration/#angle-output-source"
  },"41": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Output Configuration",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#output-configuration",
    
    "relUrl": "/docs/configuration/#output-configuration"
  },"42": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "ABI (Incremental Encoder) Output",
    "content": "Configure incremental encoder outputs (A, B, I): . | 1 2 3 4 5 6 7 8 . | // Set resolution (10-14 bits) encoder.SetABIResolution(12); // 12-bit = 4096 PPR // Set index pulse length (1 or 3 LSB periods) encoder.SetIndexPulseLength(1); // Enable ABI output encoder.ConfigureInterface(true, false, false); // ABI only . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#abi-incremental-encoder-output",
    
    "relUrl": "/docs/configuration/#abi-incremental-encoder-output"
  },"43": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "UVW (Commutation) Output",
    "content": "Configure 3-phase commutation outputs: . | 1 2 3 4 5 . | // Set number of pole pairs (1-7) encoder.SetUVWPolePairs(5); // 5 pole pairs // Enable UVW output encoder.ConfigureInterface(false, true, false); // UVW only . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#uvw-commutation-output",
    
    "relUrl": "/docs/configuration/#uvw-commutation-output"
  },"44": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "PWM Output",
    "content": "Configure PWM-encoded angle output: . | 1 2 3 . | // Enable PWM output // PWM appears on W pin if ABI enabled, or I pin if UVW enabled encoder.ConfigureInterface(true, false, true); // ABI + PWM . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#pwm-output",
    
    "relUrl": "/docs/configuration/#pwm-output"
  },"45": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Combined Outputs",
    "content": "| 1 2 3 4 5 . | // Enable both ABI and UVW (PWM not available in this mode) encoder.ConfigureInterface(true, true, false); // Enable ABI with PWM on W pin encoder.ConfigureInterface(true, false, true); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#combined-outputs",
    
    "relUrl": "/docs/configuration/#combined-outputs"
  },"46": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Advanced Configuration",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#advanced-configuration",
    
    "relUrl": "/docs/configuration/#advanced-configuration"
  },"47": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Hysteresis",
    "content": "Set incremental output hysteresis to reduce jitter: . | 1 2 . | // Set hysteresis level encoder.SetHysteresis(AS5047U_REG::SETTINGS3::Hysteresis::LSB_1); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#hysteresis",
    
    "relUrl": "/docs/configuration/#hysteresis"
  },"48": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "High-Temperature Mode",
    "content": "Enable 150¬∞C operation mode: . | 1 . | encoder.Set150CTemperatureMode(true); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#high-temperature-mode",
    
    "relUrl": "/docs/configuration/#high-temperature-mode"
  },"49": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "OTP Programming",
    "content": "Program current settings into OTP (One-Time Programmable) memory for permanent configuration: . | 1 2 3 4 5 6 7 8 9 10 11 . | // Configure all settings first encoder.SetZeroPosition(0); encoder.SetDirection(true); encoder.SetABIResolution(12); // ... other settings // Program to OTP (one-time operation, cannot be undone) bool success = encoder.ProgramOTP(); if (success) { // Settings are now permanent } . | . Warning: OTP programming is irreversible. Make sure all settings are correct before programming. ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#otp-programming",
    
    "relUrl": "/docs/configuration/#otp-programming"
  },"50": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "CRC Retry Configuration",
    "content": "Configure automatic retry on CRC errors: . | 1 2 3 4 5 . | // Read with automatic retry (3 attempts) uint16_t angle = encoder.GetAngle(3); // Or set default retries in config // AS5047U_CFG::CRC_RETRIES = 3; . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#crc-retry-configuration",
    
    "relUrl": "/docs/configuration/#crc-retry-configuration"
  },"51": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Default Values",
    "content": "| Option | Default | Description | . | DEFAULT_FRAME_FORMAT | SPI_16 | SPI frame format | . | CRC_RETRIES | 0 | Number of CRC retries | . | Zero Position | 0 | Zero reference angle | . | Direction | true (CW) | Rotation direction | . | DAEC | enabled | Dynamic angle compensation | . | Adaptive Filter | enabled | DFS adaptive filtering | . | ABI Resolution | 14-bit | Incremental output resolution | . | UVW Pole Pairs | 1 | Commutation pole pairs | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#default-values",
    
    "relUrl": "/docs/configuration/#default-values"
  },"52": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Recommended Settings",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#recommended-settings",
    
    "relUrl": "/docs/configuration/#recommended-settings"
  },"53": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "For High-Speed Motor Control",
    "content": "| 1 2 3 4 5 . | encoder.SetDynamicAngleCompensation(true); // Enable DAEC encoder.SetAdaptiveFilter(true); // Enable DFS encoder.SetFilterParameters(2, 3); // Moderate filtering encoder.SetABIResolution(12); // 4096 PPR encoder.ConfigureInterface(true, false, false); // ABI output . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#for-high-speed-motor-control",
    
    "relUrl": "/docs/configuration/#for-high-speed-motor-control"
  },"54": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "For Low-Noise Applications",
    "content": "| 1 2 3 . | encoder.SetAdaptiveFilter(true); encoder.SetFilterParameters(3, 5); // Stronger filtering encoder.SetHysteresis(AS5047U_REG::SETTINGS3::Hysteresis::LSB_2); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#for-low-noise-applications",
    
    "relUrl": "/docs/configuration/#for-low-noise-applications"
  },"55": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "For Basic Angle Reading",
    "content": "| 1 2 . | // Use default settings, just read angle uint16_t angle = encoder.GetAngle(); . | . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#for-basic-angle-reading",
    
    "relUrl": "/docs/configuration/#for-basic-angle-reading"
  },"56": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "Next Steps",
    "content": ". | See Examples for configuration examples | Review API Reference for all configuration methods | . Navigation ‚¨ÖÔ∏è Platform Integration | Next: API Reference ‚û°Ô∏è | Back to Index . ",
    "url": "/hf-as5047u-driver/development/docs/configuration/#next-steps",
    
    "relUrl": "/docs/configuration/#next-steps"
  },"57": {
    "doc": "‚öôÔ∏è Configuration",
    "title": "‚öôÔ∏è Configuration",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/configuration/",
    
    "relUrl": "/docs/configuration/"
  },"58": {
    "doc": "üí° Examples",
    "title": "Examples",
    "content": "This guide provides complete, working examples demonstrating various use cases for the AS5047U driver. ",
    "url": "/hf-as5047u-driver/development/docs/examples/#examples",
    
    "relUrl": "/docs/examples/#examples"
  },"59": {
    "doc": "üí° Examples",
    "title": "Example 1: Basic Angle Reading",
    "content": "This example shows the minimal setup required to read angle values. | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 . | #include \"as5047u.hpp\" #include \"esp32_as5047u_bus.hpp\" // Your SPI implementation void app_main() { // 1. Configure SPI bus Esp32As5047uBus::SPIConfig config; config.miso_pin = GPIO_NUM_2; config.mosi_pin = GPIO_NUM_7; config.sclk_pin = GPIO_NUM_6; config.cs_pin = GPIO_NUM_10; config.frequency = 4000000; config.mode = 1; auto bus = std::make_unique&lt;Esp32As5047uBus&gt;(config); bus-&gt;initialize(); // 2. Create encoder instance as5047u::AS5047U encoder(*bus, FrameFormat::SPI_24); // 3. Read angle in a loop while (true) { uint16_t angle = encoder.GetAngle(); float angle_deg = angle * 360.0f / 16384.0f; printf(\"Angle: %u (%.2f¬∞)\\n\", angle, angle_deg); vTaskDelay(pdMS_TO_TICKS(100)); } } . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#example-1-basic-angle-reading",
    
    "relUrl": "/docs/examples/#example-1-basic-angle-reading"
  },"60": {
    "doc": "üí° Examples",
    "title": "Explanation",
    "content": ". | SPI Configuration: Configure the SPI bus with appropriate pins and settings | Encoder Creation: Create the encoder instance with SPI bus and frame format | Angle Reading: Read angle values in a loop and convert to degrees | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#explanation",
    
    "relUrl": "/docs/examples/#explanation"
  },"61": {
    "doc": "üí° Examples",
    "title": "Expected Output",
    "content": "| 1 2 3 . | Angle: 8192 (180.00¬∞) Angle: 8200 (180.18¬∞) Angle: 8208 (180.35¬∞) . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#expected-output",
    
    "relUrl": "/docs/examples/#expected-output"
  },"62": {
    "doc": "üí° Examples",
    "title": "Example 2: Velocity Measurement",
    "content": "This example demonstrates reading velocity in different units. | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 . | #include \"as5047u.hpp\" void app_main() { // ... SPI setup (same as Example 1) as5047u::AS5047U encoder(*bus, FrameFormat::SPI_24); while (true) { // Read velocity in different units int16_t vel_lsb = encoder.GetVelocity(); float vel_dps = encoder.GetVelocityDegPerSec(); float vel_rpm = encoder.GetVelocityRPM(); printf(\"Velocity: %d LSB, %.2f deg/s, %.2f RPM\\n\", vel_lsb, vel_dps, vel_rpm); vTaskDelay(pdMS_TO_TICKS(100)); } } . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#example-2-velocity-measurement",
    
    "relUrl": "/docs/examples/#example-2-velocity-measurement"
  },"63": {
    "doc": "üí° Examples",
    "title": "Explanation",
    "content": "The driver provides multiple velocity unit conversions: . | GetVelocity() - Returns signed 14-bit LSB units | GetVelocityDegPerSec() - Returns degrees per second | GetVelocityRPM() - Returns revolutions per minute | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#explanation-1",
    
    "relUrl": "/docs/examples/#explanation-1"
  },"64": {
    "doc": "üí° Examples",
    "title": "Example 3: Diagnostics and Error Handling",
    "content": "This example shows proper error handling and diagnostic reading. | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 . | #include \"as5047u.hpp\" void app_main() { // ... SPI setup as5047u::AS5047U encoder(*bus, FrameFormat::SPI_24); while (true) { // Read angle with retry on CRC errors uint16_t angle = encoder.GetAngle(3); // 3 retries // Read diagnostics uint8_t agc = encoder.GetAGC(); uint16_t mag = encoder.GetMagnitude(); // Check for errors AS5047U_Error errors = encoder.GetStickyErrorFlags(); if (errors != AS5047U_Error::None) { printf(\"Error detected: 0x%04X\\n\", static_cast&lt;uint16_t&gt;(errors)); // Check specific errors if (errors &amp; static_cast&lt;uint16_t&gt;(AS5047U_Error::AgcWarning)) { printf(\"Warning: AGC at limit - check magnet placement\\n\"); } if (errors &amp; static_cast&lt;uint16_t&gt;(AS5047U_Error::CrcError)) { printf(\"Warning: CRC error detected\\n\"); } } printf(\"Angle: %u, AGC: %u, Mag: %u\\n\", angle, agc, mag); vTaskDelay(pdMS_TO_TICKS(100)); } } . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#example-3-diagnostics-and-error-handling",
    
    "relUrl": "/docs/examples/#example-3-diagnostics-and-error-handling"
  },"65": {
    "doc": "üí° Examples",
    "title": "Explanation",
    "content": ". | CRC Retry: Pass retry count to GetAngle() for automatic retry on CRC errors | Diagnostics: Read AGC and magnitude for health monitoring | Error Checking: Check error flags and handle specific error conditions | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#explanation-2",
    
    "relUrl": "/docs/examples/#explanation-2"
  },"66": {
    "doc": "üí° Examples",
    "title": "Example 4: ABI Incremental Output Configuration",
    "content": "This example configures the AS5047U to output incremental encoder signals (A, B, I). | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 . | #include \"as5047u.hpp\" void app_main() { // ... SPI setup as5047u::AS5047U encoder(*bus, FrameFormat::SPI_24); // Configure ABI output encoder.SetABIResolution(12); // 12-bit = 4096 PPR encoder.SetIndexPulseLength(1); // Index pulse length encoder.ConfigureInterface(true, false, false); // Enable ABI, disable UVW and PWM printf(\"ABI output configured: 12-bit (4096 PPR)\\n\"); printf(\"Connect A, B, I pins to your motor controller\\n\"); // Continue reading angle via SPI while (true) { uint16_t angle = encoder.GetAngle(); printf(\"Angle: %u\\n\", angle); vTaskDelay(pdMS_TO_TICKS(100)); } } . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#example-4-abi-incremental-output-configuration",
    
    "relUrl": "/docs/examples/#example-4-abi-incremental-output-configuration"
  },"67": {
    "doc": "üí° Examples",
    "title": "Explanation",
    "content": ". | Resolution: Set ABI resolution (10-14 bits) | Index Pulse: Configure index pulse width | Interface: Enable ABI output via ConfigureInterface() | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#explanation-3",
    
    "relUrl": "/docs/examples/#explanation-3"
  },"68": {
    "doc": "üí° Examples",
    "title": "Example 5: UVW Commutation Output Configuration",
    "content": "This example configures the AS5047U to output 3-phase commutation signals (U, V, W). | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 . | #include \"as5047u.hpp\" void app_main() { // ... SPI setup as5047u::AS5047U encoder(*bus, FrameFormat::SPI_24); // Configure UVW output encoder.SetUVWPolePairs(5); // 5 pole pairs encoder.ConfigureInterface(false, true, false); // Disable ABI, enable UVW, disable PWM printf(\"UVW output configured: 5 pole pairs\\n\"); printf(\"Connect U, V, W pins to your motor controller\\n\"); // Continue reading angle via SPI while (true) { uint16_t angle = encoder.GetAngle(); printf(\"Angle: %u\\n\", angle); vTaskDelay(pdMS_TO_TICKS(100)); } } . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#example-5-uvw-commutation-output-configuration",
    
    "relUrl": "/docs/examples/#example-5-uvw-commutation-output-configuration"
  },"69": {
    "doc": "üí° Examples",
    "title": "Explanation",
    "content": ". | Pole Pairs: Set number of pole pairs (1-7) for your motor | Interface: Enable UVW output via ConfigureInterface() | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#explanation-4",
    
    "relUrl": "/docs/examples/#explanation-4"
  },"70": {
    "doc": "üí° Examples",
    "title": "Example 6: Advanced Features (DAEC and Filtering)",
    "content": "This example demonstrates enabling DAEC and adaptive filtering for high-performance applications. | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 . | #include \"as5047u.hpp\" void app_main() { // ... SPI setup as5047u::AS5047U encoder(*bus, FrameFormat::SPI_24); // Enable advanced features encoder.SetDynamicAngleCompensation(true); // Enable DAEC encoder.SetAdaptiveFilter(true); // Enable DFS encoder.SetFilterParameters(2, 3); // Set filter parameters printf(\"DAEC and adaptive filter enabled\\n\"); while (true) { // Read compensated angle (with DAEC) uint16_t angle = encoder.GetAngle(); // Read raw angle (without DAEC) for comparison uint16_t raw_angle = encoder.GetRawAngle(); printf(\"Compensated: %u, Raw: %u\\n\", angle, raw_angle); vTaskDelay(pdMS_TO_TICKS(100)); } } . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#example-6-advanced-features-daec-and-filtering",
    
    "relUrl": "/docs/examples/#example-6-advanced-features-daec-and-filtering"
  },"71": {
    "doc": "üí° Examples",
    "title": "Explanation",
    "content": ". | DAEC: Dynamic Angle Error Compensation for low-latency angle correction | Adaptive Filter: Dynamic Filter System for noise reduction | Filter Parameters: Set K_min and K_max for filter strength | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#explanation-5",
    
    "relUrl": "/docs/examples/#explanation-5"
  },"72": {
    "doc": "üí° Examples",
    "title": "Example 7: Zero Position Calibration",
    "content": "This example shows how to set a zero reference position. | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 . | #include \"as5047u.hpp\" void app_main() { // ... SPI setup as5047u::AS5047U encoder(*bus, FrameFormat::SPI_24); // Wait for sensor to stabilize vTaskDelay(pdMS_TO_TICKS(100)); // Read current angle uint16_t current_angle = encoder.GetAngle(); // Set it as zero reference if (encoder.SetZeroPosition(current_angle)) { printf(\"Zero position set to: %u\\n\", current_angle); } else { printf(\"Failed to set zero position\\n\"); } // Now angle readings will be relative to this position while (true) { uint16_t angle = encoder.GetAngle(); printf(\"Angle: %u\\n\", angle); vTaskDelay(pdMS_TO_TICKS(100)); } } . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#example-7-zero-position-calibration",
    
    "relUrl": "/docs/examples/#example-7-zero-position-calibration"
  },"73": {
    "doc": "üí° Examples",
    "title": "Explanation",
    "content": ". | Stabilize: Wait for sensor to stabilize after power-on | Read Current: Read the current angle position | Set Zero: Set the current position as zero reference | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#explanation-6",
    
    "relUrl": "/docs/examples/#explanation-6"
  },"74": {
    "doc": "üí° Examples",
    "title": "Example 8: Full Feature Configuration",
    "content": "This example demonstrates configuring all features together. | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 . | #include \"as5047u.hpp\" void app_main() { // ... SPI setup as5047u::AS5047U encoder(*bus, FrameFormat::SPI_24); // Configure all features encoder.SetZeroPosition(0); encoder.SetDirection(true); // Clockwise = positive encoder.SetDynamicAngleCompensation(true); encoder.SetAdaptiveFilter(true); encoder.SetFilterParameters(2, 3); encoder.SetABIResolution(12); encoder.SetUVWPolePairs(5); encoder.ConfigureInterface(true, true, false); // ABI + UVW printf(\"Full configuration applied\\n\"); // Dump status for verification encoder.DumpStatus(); // Main loop while (true) { uint16_t angle = encoder.GetAngle(); float vel_dps = encoder.GetVelocityDegPerSec(); uint8_t agc = encoder.GetAGC(); printf(\"Angle: %u, Vel: %.2f deg/s, AGC: %u\\n\", angle, vel_dps, agc); vTaskDelay(pdMS_TO_TICKS(100)); } } . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#example-8-full-feature-configuration",
    
    "relUrl": "/docs/examples/#example-8-full-feature-configuration"
  },"75": {
    "doc": "üí° Examples",
    "title": "Explanation",
    "content": "This example shows a complete configuration with all major features enabled. ",
    "url": "/hf-as5047u-driver/development/docs/examples/#explanation-7",
    
    "relUrl": "/docs/examples/#explanation-7"
  },"76": {
    "doc": "üí° Examples",
    "title": "Running the Examples",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/examples/#running-the-examples",
    
    "relUrl": "/docs/examples/#running-the-examples"
  },"77": {
    "doc": "üí° Examples",
    "title": "ESP32",
    "content": "| 1 2 . | cd examples/esp32 idf.py build flash monitor . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#esp32",
    
    "relUrl": "/docs/examples/#esp32"
  },"78": {
    "doc": "üí° Examples",
    "title": "Other Platforms",
    "content": "For other platforms, implement the SPI interface and compile with C++20 support: . | 1 . | g++ -std=c++20 -I inc/ your_code.cpp src/as5047u.cpp . | . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#other-platforms",
    
    "relUrl": "/docs/examples/#other-platforms"
  },"79": {
    "doc": "üí° Examples",
    "title": "Next Steps",
    "content": ". | Review the API Reference for method details | Check Troubleshooting if you encounter issues | Explore the examples directory for more examples | . Navigation ‚¨ÖÔ∏è API Reference | Next: Troubleshooting ‚û°Ô∏è | Back to Index . ",
    "url": "/hf-as5047u-driver/development/docs/examples/#next-steps",
    
    "relUrl": "/docs/examples/#next-steps"
  },"80": {
    "doc": "üí° Examples",
    "title": "üí° Examples",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/examples/",
    
    "relUrl": "/docs/examples/"
  },"81": {
    "doc": "üîå Hardware Setup",
    "title": "Hardware Setup",
    "content": "This guide covers the physical connections and hardware requirements for the AS5047U magnetic encoder chip. ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#hardware-setup",
    
    "relUrl": "/docs/hardware_setup/#hardware-setup"
  },"82": {
    "doc": "üîå Hardware Setup",
    "title": "Pin Connections",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#pin-connections",
    
    "relUrl": "/docs/hardware_setup/#pin-connections"
  },"83": {
    "doc": "üîå Hardware Setup",
    "title": "Basic SPI Connections",
    "content": "| 1 2 3 4 5 6 7 8 . | MCU AS5047U ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 3.3V ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ VDD GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ GND SCK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CLK MOSI ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MISO (note: AS5047U uses MISO for both directions) MISO ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MOSI CS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CSn . | . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#basic-spi-connections",
    
    "relUrl": "/docs/hardware_setup/#basic-spi-connections"
  },"84": {
    "doc": "üîå Hardware Setup",
    "title": "Pin Descriptions",
    "content": "| Pin | Name | Description | Required | . | VDD | Power | 3.3V power supply (2.7V - 3.6V) | Yes | . | GND | Ground | Ground reference | Yes | . | CLK | Clock | SPI clock line | Yes | . | MISO | Master In | SPI data input (MCU receives) | Yes | . | MOSI | Master Out | SPI data output (MCU transmits) | Yes | . | CSn | Chip Select | SPI chip select (active low) | Yes | . | PROG | Program | OTP programming enable (optional) | No | . Note: The AS5047U uses a unique SPI configuration where MISO and MOSI are swapped compared to standard SPI. The MCU‚Äôs MOSI connects to the AS5047U‚Äôs MISO pin, and the MCU‚Äôs MISO connects to the AS5047U‚Äôs MOSI pin. ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#pin-descriptions",
    
    "relUrl": "/docs/hardware_setup/#pin-descriptions"
  },"85": {
    "doc": "üîå Hardware Setup",
    "title": "Power Requirements",
    "content": ". | Supply Voltage: 2.7V - 3.6V (3.3V typical) | Current Consumption: 6.5 mA typical, 10 mA maximum | Power Supply: Clean 3.3V supply with decoupling capacitor (100nF ceramic + 10¬µF tantalum recommended) | . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#power-requirements",
    
    "relUrl": "/docs/hardware_setup/#power-requirements"
  },"86": {
    "doc": "üîå Hardware Setup",
    "title": "SPI Configuration",
    "content": ". | Mode: SPI Mode 1 (CPOL=0, CPHA=1) or Mode 3 (CPOL=1, CPHA=1) | Speed: Up to 10 MHz (4 MHz recommended for reliability) | Bit Order: MSB first | CS Polarity: Active low (CSn) | Frame Formats: 16-bit, 24-bit (with CRC), or 32-bit (with CRC) | . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#spi-configuration",
    
    "relUrl": "/docs/hardware_setup/#spi-configuration"
  },"87": {
    "doc": "üîå Hardware Setup",
    "title": "Magnetic Setup",
    "content": "The AS5047U requires a diametrically magnetized magnet positioned above the sensor: . | Magnet Type: Diametrically magnetized (2-pole) magnet | Magnet Diameter: 6-12 mm recommended | Air Gap: 0.5 - 3.0 mm (1.0 mm typical) | Alignment: Centered above the sensor die | Field Strength: 30-100 mT at the sensor surface | . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#magnetic-setup",
    
    "relUrl": "/docs/hardware_setup/#magnetic-setup"
  },"88": {
    "doc": "üîå Hardware Setup",
    "title": "Physical Layout Recommendations",
    "content": ". | Keep SPI traces short (&lt; 10cm recommended) | Use ground plane for noise reduction | Place decoupling capacitors (100nF ceramic + 10¬µF tantalum) close to VDD pin | Route clock and data lines away from noise sources | Keep magnet away from ferromagnetic materials | Avoid stray magnetic fields from motors or other sources | . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#physical-layout-recommendations",
    
    "relUrl": "/docs/hardware_setup/#physical-layout-recommendations"
  },"89": {
    "doc": "üîå Hardware Setup",
    "title": "Example Wiring Diagram",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 . | AS5047U ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê 3.3V ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ VDD ‚îÇ GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ GND ‚îÇ SCK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ CLK ‚îÇ MOSI ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ MISO ‚îÇ MISO ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ MOSI ‚îÇ CS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ CSn ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ (air gap 0.5-3mm) ‚ñº ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ Magnet‚îÇ ‚îÇ (6-12mm)‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò . | . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#example-wiring-diagram",
    
    "relUrl": "/docs/hardware_setup/#example-wiring-diagram"
  },"90": {
    "doc": "üîå Hardware Setup",
    "title": "Incremental Output Pins (ABI)",
    "content": "If using ABI incremental outputs: . | Pin | Name | Description | . | A | A | Incremental encoder A output | . | B | B | Incremental encoder B output | . | I | I | Index pulse output | . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#incremental-output-pins-abi",
    
    "relUrl": "/docs/hardware_setup/#incremental-output-pins-abi"
  },"91": {
    "doc": "üîå Hardware Setup",
    "title": "Commutation Output Pins (UVW)",
    "content": "If using UVW commutation outputs: . | Pin | Name | Description | . | U | U | Commutation U output | . | V | V | Commutation V output | . | W | W | Commutation W output | . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#commutation-output-pins-uvw",
    
    "relUrl": "/docs/hardware_setup/#commutation-output-pins-uvw"
  },"92": {
    "doc": "üîå Hardware Setup",
    "title": "PWM Output",
    "content": "If using PWM output: . | Pin | Name | Description | . | PWM | PWM | PWM-encoded angle output (on W or I pin depending on configuration) | . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#pwm-output",
    
    "relUrl": "/docs/hardware_setup/#pwm-output"
  },"93": {
    "doc": "üîå Hardware Setup",
    "title": "Next Steps",
    "content": ". | Verify connections with a multimeter | Proceed to Quick Start to test the connection | Review Platform Integration for software setup | . Navigation ‚¨ÖÔ∏è Quick Start | Next: Platform Integration ‚û°Ô∏è | Back to Index . ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/#next-steps",
    
    "relUrl": "/docs/hardware_setup/#next-steps"
  },"94": {
    "doc": "üîå Hardware Setup",
    "title": "üîå Hardware Setup",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/hardware_setup/",
    
    "relUrl": "/docs/hardware_setup/"
  },"95": {
    "doc": "üìö Documentation",
    "title": "HF-AS5047U Documentation",
    "content": "Welcome! This directory contains step-by-step guides for installing, building, and using the HF-AS5047U library. ",
    "url": "/hf-as5047u-driver/development/docs/#hf-as5047u-documentation",
    
    "relUrl": "/docs/#hf-as5047u-documentation"
  },"96": {
    "doc": "üìö Documentation",
    "title": "üìö Documentation Structure",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/#-documentation-structure",
    
    "relUrl": "/docs/#-documentation-structure"
  },"97": {
    "doc": "üìö Documentation",
    "title": "Getting Started",
    "content": ". | üõ†Ô∏è Installation ‚Äì Prerequisites and how to obtain the source | ‚ö° Quick Start ‚Äì Minimal working example to get you running | üîå Hardware Setup ‚Äì Wiring diagrams and pin connections | . ",
    "url": "/hf-as5047u-driver/development/docs/#getting-started",
    
    "relUrl": "/docs/#getting-started"
  },"98": {
    "doc": "üìö Documentation",
    "title": "Integration",
    "content": ". | üîß Platform Integration ‚Äì Implement the CRTP SPI interface for your platform | ‚öôÔ∏è Configuration ‚Äì Configuration options and settings | . ",
    "url": "/hf-as5047u-driver/development/docs/#integration",
    
    "relUrl": "/docs/#integration"
  },"99": {
    "doc": "üìö Documentation",
    "title": "Reference",
    "content": ". | üìñ API Reference ‚Äì Complete API documentation | üí° Examples ‚Äì Detailed example walkthroughs | . ",
    "url": "/hf-as5047u-driver/development/docs/#reference",
    
    "relUrl": "/docs/#reference"
  },"100": {
    "doc": "üìö Documentation",
    "title": "Troubleshooting",
    "content": ". | üêõ Troubleshooting ‚Äì Common issues and solutions | . ",
    "url": "/hf-as5047u-driver/development/docs/#troubleshooting",
    
    "relUrl": "/docs/#troubleshooting"
  },"101": {
    "doc": "üìö Documentation",
    "title": "üöÄ Quick Start Path",
    "content": "New to AS5047U? Follow this recommended path: . | Start with Installation to prepare your environment | Follow Hardware Setup to wire your hardware | Read Quick Start for a minimal working example | Check Platform Integration to implement the SPI interface | Explore Examples for more advanced usage | . ",
    "url": "/hf-as5047u-driver/development/docs/#-quick-start-path",
    
    "relUrl": "/docs/#-quick-start-path"
  },"102": {
    "doc": "üìö Documentation",
    "title": "üí° Need Help?",
    "content": ". | üêõ Found a bug? Check the Troubleshooting guide | ‚ùì Have questions? Review the API Reference | üìù Want to contribute? See the contributing guidelines in the main README | . Navigation ‚û°Ô∏è Installation . ",
    "url": "/hf-as5047u-driver/development/docs/#-need-help",
    
    "relUrl": "/docs/#-need-help"
  },"103": {
    "doc": "üìö Documentation",
    "title": "üìö Documentation",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/",
    
    "relUrl": "/docs/"
  },"104": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Installation",
    "content": "This guide covers how to obtain and integrate the AS5047U driver library into your project. ",
    "url": "/hf-as5047u-driver/development/docs/installation/#installation",
    
    "relUrl": "/docs/installation/#installation"
  },"105": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Prerequisites",
    "content": "Before installing the driver, ensure you have: . | C++20 Compiler: GCC 10+, Clang 12+, or MSVC 2019+ | Build System: Make, CMake, or ESP-IDF (depending on your platform) | Platform SDK: ESP-IDF, STM32 HAL, Arduino, or your platform‚Äôs SPI driver | . ",
    "url": "/hf-as5047u-driver/development/docs/installation/#prerequisites",
    
    "relUrl": "/docs/installation/#prerequisites"
  },"106": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Obtaining the Source",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/installation/#obtaining-the-source",
    
    "relUrl": "/docs/installation/#obtaining-the-source"
  },"107": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Option 1: Git Clone",
    "content": "| 1 2 . | git clone https://github.com/n3b3x/hf-as5047u-driver.git cd hf-as5047u-driver . | . ",
    "url": "/hf-as5047u-driver/development/docs/installation/#option-1-git-clone",
    
    "relUrl": "/docs/installation/#option-1-git-clone"
  },"108": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Option 2: Copy Files",
    "content": "Copy the following files into your project: . | 1 2 3 4 5 6 7 8 . | inc/ ‚îú‚îÄ‚îÄ as5047u.hpp ‚îú‚îÄ‚îÄ as5047u_spi_interface.hpp ‚îú‚îÄ‚îÄ as5047u_registers.hpp ‚îú‚îÄ‚îÄ as5047u_types.hpp ‚îî‚îÄ‚îÄ as5047u_config.hpp src/ ‚îî‚îÄ‚îÄ as5047u.cpp . | . ",
    "url": "/hf-as5047u-driver/development/docs/installation/#option-2-copy-files",
    
    "relUrl": "/docs/installation/#option-2-copy-files"
  },"109": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Integration Methods",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/installation/#integration-methods",
    
    "relUrl": "/docs/installation/#integration-methods"
  },"110": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Using CMake",
    "content": "Add the driver as a subdirectory in your CMakeLists.txt: . | 1 2 3 4 5 . | add_subdirectory(external/hf-as5047u-driver) target_link_libraries(your_target PRIVATE hf_as5047u) target_include_directories(your_target PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/external/hf-as5047u-driver/inc ) . | . ",
    "url": "/hf-as5047u-driver/development/docs/installation/#using-cmake",
    
    "relUrl": "/docs/installation/#using-cmake"
  },"111": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Using ESP-IDF Component",
    "content": "The driver can be used as an ESP-IDF component. Add it to your components directory: . | 1 2 3 4 5 6 . | # In your main CMakeLists.txt idf_component_register( SRCS \"your_code.cpp\" INCLUDE_DIRS \".\" REQUIRES hf_as5047u ) . | . ",
    "url": "/hf-as5047u-driver/development/docs/installation/#using-esp-idf-component",
    
    "relUrl": "/docs/installation/#using-esp-idf-component"
  },"112": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Manual Integration",
    "content": ". | Copy the driver files to your project | Add the inc/ directory to your include path | Include the header: | 1 . | #include \"as5047u.hpp\" . | . | Compile with C++20 support: | 1 . | g++ -std=c++20 -I inc/ your_code.cpp src/as5047u.cpp . | . | . ",
    "url": "/hf-as5047u-driver/development/docs/installation/#manual-integration",
    
    "relUrl": "/docs/installation/#manual-integration"
  },"113": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Running Unit Tests",
    "content": "The library includes unit tests. To run them: . | 1 2 3 . | cd tests g++ -std=c++20 -I ../inc ../src/as5047u.cpp test_as5047u.cpp -o test ./test . | . Expected output: . | 1 . | All tests passed. | . ",
    "url": "/hf-as5047u-driver/development/docs/installation/#running-unit-tests",
    
    "relUrl": "/docs/installation/#running-unit-tests"
  },"114": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Verification",
    "content": "To verify the installation: . | Include the header in a test file: | 1 . | #include \"as5047u.hpp\" . | . | Compile a simple test: | 1 . | g++ -std=c++20 -I inc/ -c src/as5047u.cpp -o test.o . | . | If compilation succeeds, the library is properly installed. | . ",
    "url": "/hf-as5047u-driver/development/docs/installation/#verification",
    
    "relUrl": "/docs/installation/#verification"
  },"115": {
    "doc": "üõ†Ô∏è Installation",
    "title": "Next Steps",
    "content": ". | Follow the Quick Start guide to create your first application | Review Hardware Setup for wiring instructions | Check Platform Integration to implement the SPI interface | . Navigation ‚¨ÖÔ∏è Back to Index | Next: Quick Start ‚û°Ô∏è . ",
    "url": "/hf-as5047u-driver/development/docs/installation/#next-steps",
    
    "relUrl": "/docs/installation/#next-steps"
  },"116": {
    "doc": "üõ†Ô∏è Installation",
    "title": "üõ†Ô∏è Installation",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/installation/",
    
    "relUrl": "/docs/installation/"
  },"117": {
    "doc": "üîß Platform Integration",
    "title": "Platform Integration Guide",
    "content": "This guide explains how to implement the hardware abstraction interface for the AS5047U driver on your platform. ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#platform-integration-guide",
    
    "relUrl": "/docs/platform_integration/#platform-integration-guide"
  },"118": {
    "doc": "üîß Platform Integration",
    "title": "Understanding CRTP (Curiously Recurring Template Pattern)",
    "content": "The AS5047U driver uses CRTP (Curiously Recurring Template Pattern) for hardware abstraction. This design choice provides several critical benefits for embedded systems: . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#understanding-crtp-curiously-recurring-template-pattern",
    
    "relUrl": "/docs/platform_integration/#understanding-crtp-curiously-recurring-template-pattern"
  },"119": {
    "doc": "üîß Platform Integration",
    "title": "Why CRTP Instead of Virtual Functions?",
    "content": "1. Zero Runtime Overhead . | Virtual functions: Require a vtable lookup (indirect call) = ~5-10 CPU cycles overhead per call | CRTP: Direct function calls = 0 overhead, compiler can inline | Impact: In time-critical embedded code reading angles at high rates, this matters significantly | . 2. Compile-Time Polymorphism . | Virtual functions: Runtime dispatch - the compiler cannot optimize across the abstraction boundary | CRTP: Compile-time dispatch - full optimization, dead code elimination, constant propagation | Impact: Smaller code size, faster execution | . 3. Memory Efficiency . | Virtual functions: Each object needs a vtable pointer (4-8 bytes) | CRTP: No vtable pointer needed | Impact: Critical in memory-constrained systems (many MCUs have &lt;64KB RAM) | . 4. Type Safety . | Virtual functions: Runtime errors if method not implemented | CRTP: Compile-time errors if method not implemented | Impact: Catch bugs at compile time, not in the field | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#why-crtp-instead-of-virtual-functions",
    
    "relUrl": "/docs/platform_integration/#why-crtp-instead-of-virtual-functions"
  },"120": {
    "doc": "üîß Platform Integration",
    "title": "How CRTP Works",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 . | // Base template class (from as5047u_spi_interface.hpp) template &lt;typename Derived&gt; class SpiInterface { public: void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len) { // Cast 'this' to Derived* and call the derived implementation static_cast&lt;Derived*&gt;(this)-&gt;transfer(tx, rx, len); } }; // Your implementation class MySPI : public as5047u::SpiInterface&lt;MySPI&gt; { public: // This method is called directly (no virtual overhead) void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len) { // Your platform-specific SPI code } }; . | . The key insight: static_cast&lt;Derived*&gt;(this) allows the base class to call methods on the derived class at compile time, not runtime. ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#how-crtp-works",
    
    "relUrl": "/docs/platform_integration/#how-crtp-works"
  },"121": {
    "doc": "üîß Platform Integration",
    "title": "Performance Comparison",
    "content": "| Aspect | Virtual Functions | CRTP | . | Function call overhead | ~5-10 cycles | 0 cycles (inlined) | . | Code size | Larger (vtables) | Smaller (optimized) | . | Memory per object | +4-8 bytes (vptr) | 0 bytes | . | Compile-time checks | No | Yes | . | Optimization | Limited | Full | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#performance-comparison",
    
    "relUrl": "/docs/platform_integration/#performance-comparison"
  },"122": {
    "doc": "üîß Platform Integration",
    "title": "Interface Definition",
    "content": "The AS5047U driver requires you to implement the following interface: . | 1 2 3 4 5 6 . | template &lt;typename Derived&gt; class SpiInterface { public: // Required method void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len); }; . | . Key Requirements: . | tx: Pointer to data to transmit (can be nullptr to send zeros) | rx: Pointer to buffer for received data (can be nullptr to ignore received data) | len: Number of bytes to transfer | CS Management: Your implementation must assert chip select before transfer and deassert after | SPI Mode: AS5047U uses SPI Mode 1 (CPOL=0, CPHA=1) or Mode 3 (CPOL=1, CPHA=1) | Bit Order: MSB first | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#interface-definition",
    
    "relUrl": "/docs/platform_integration/#interface-definition"
  },"123": {
    "doc": "üîß Platform Integration",
    "title": "Implementation Steps",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#implementation-steps",
    
    "relUrl": "/docs/platform_integration/#implementation-steps"
  },"124": {
    "doc": "üîß Platform Integration",
    "title": "Step 1: Create Your Implementation Class",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 . | #include \"as5047u_spi_interface.hpp\" class MyPlatformSPI : public as5047u::SpiInterface&lt;MyPlatformSPI&gt; { private: // Your platform-specific members spi_device_handle_t spi_device_; // Example for ESP32 public: // Constructor MyPlatformSPI(spi_device_handle_t device) : spi_device_(device) {} // Implement required method void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len) { // Assert CS // Perform SPI transfer // Deassert CS } }; . | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#step-1-create-your-implementation-class",
    
    "relUrl": "/docs/platform_integration/#step-1-create-your-implementation-class"
  },"125": {
    "doc": "üîß Platform Integration",
    "title": "Step 2: Platform-Specific Examples",
    "content": "ESP32 (ESP-IDF) . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 . | #include \"driver/spi_master.h\" #include \"as5047u_spi_interface.hpp\" class Esp32SPIBus : public as5047u::SpiInterface&lt;Esp32SPIBus&gt; { private: spi_device_handle_t spi_device_; public: Esp32SPIBus(spi_device_handle_t device) : spi_device_(device) {} void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len) { spi_transaction_t trans = {}; trans.length = len * 8; // Length in bits trans.tx_buffer = tx; trans.rx_buffer = rx; esp_err_t ret = spi_device_transmit(spi_device_, &amp;trans); if (ret != ESP_OK) { // Handle error } } }; . | . Full ESP32 Example: . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 . | // From examples/esp32/main/esp32_as5047u_bus.hpp class Esp32As5047uBus : public as5047u::SpiInterface&lt;Esp32As5047uBus&gt; { public: struct SPIConfig { spi_host_device_t host = SPI2_HOST; gpio_num_t miso_pin = GPIO_NUM_2; gpio_num_t mosi_pin = GPIO_NUM_7; gpio_num_t sclk_pin = GPIO_NUM_6; gpio_num_t cs_pin = GPIO_NUM_10; uint32_t frequency = 4000000; uint8_t mode = 1; // SPI Mode 1 }; explicit Esp32As5047uBus(const SPIConfig&amp; config); ~Esp32As5047uBus(); bool initialize(); void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len); private: SPIConfig config_; spi_device_handle_t spi_device_; bool initialized_; }; . | . STM32 (HAL) . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 . | #include \"stm32f4xx_hal.h\" #include \"as5047u_spi_interface.hpp\" extern SPI_HandleTypeDef hspi1; class STM32SPIBus : public as5047u::SpiInterface&lt;STM32SPIBus&gt; { private: GPIO_TypeDef* cs_port_; uint16_t cs_pin_; public: STM32SPIBus(GPIO_TypeDef* cs_port, uint16_t cs_pin) : cs_port_(cs_port), cs_pin_(cs_pin) {} void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len) { // Assert CS HAL_GPIO_WritePin(cs_port_, cs_pin_, GPIO_PIN_RESET); // Perform transfer HAL_StatusTypeDef status = HAL_SPI_TransmitReceive(&amp;hspi1, (uint8_t*)tx, (uint8_t*)rx, len, HAL_MAX_DELAY); // Deassert CS HAL_GPIO_WritePin(cs_port_, cs_pin_, GPIO_PIN_SET); if (status != HAL_OK) { // Handle error } } }; . | . Arduino . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 . | #include &lt;SPI.h&gt; #include \"as5047u_spi_interface.hpp\" class ArduinoSPIBus : public as5047u::SpiInterface&lt;ArduinoSPIBus&gt; { private: uint8_t cs_pin_; public: ArduinoSPIBus(uint8_t cs_pin) : cs_pin_(cs_pin) { pinMode(cs_pin_, OUTPUT); digitalWrite(cs_pin_, HIGH); } void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len) { // Begin transaction with AS5047U settings SPI.beginTransaction(SPISettings(4000000, MSBFIRST, SPI_MODE1)); // Assert CS digitalWrite(cs_pin_, LOW); // Transfer data for (size_t i = 0; i &lt; len; i++) { uint8_t byte = SPI.transfer(tx ? tx[i] : 0); if (rx) { rx[i] = byte; } } // Deassert CS digitalWrite(cs_pin_, HIGH); // End transaction SPI.endTransaction(); } }; . | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#step-2-platform-specific-examples",
    
    "relUrl": "/docs/platform_integration/#step-2-platform-specific-examples"
  },"126": {
    "doc": "üîß Platform Integration",
    "title": "Common Pitfalls",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#common-pitfalls",
    
    "relUrl": "/docs/platform_integration/#common-pitfalls"
  },"127": {
    "doc": "üîß Platform Integration",
    "title": "‚ùå Don‚Äôt Use Virtual Functions",
    "content": "| 1 2 3 4 5 6 7 . | // WRONG - defeats the purpose of CRTP class MyBus : public as5047u::SpiInterface&lt;MyBus&gt; { public: virtual void transfer(...) override { // ‚ùå Virtual keyword not needed // ... } }; . | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#-dont-use-virtual-functions",
    
    "relUrl": "/docs/platform_integration/#-dont-use-virtual-functions"
  },"128": {
    "doc": "üîß Platform Integration",
    "title": "‚úÖ Correct CRTP Implementation",
    "content": "| 1 2 3 4 5 6 7 . | // CORRECT - no virtual keyword class MyBus : public as5047u::SpiInterface&lt;MyBus&gt; { public: void transfer(...) { // ‚úÖ Direct implementation // ... } }; . | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#-correct-crtp-implementation",
    
    "relUrl": "/docs/platform_integration/#-correct-crtp-implementation"
  },"129": {
    "doc": "üîß Platform Integration",
    "title": "‚ùå Don‚Äôt Forget the Template Parameter",
    "content": "| 1 2 3 4 . | // WRONG - missing template parameter class MyBus : public as5047u::SpiInterface { // ‚ùå Compiler error // ... }; . | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#-dont-forget-the-template-parameter",
    
    "relUrl": "/docs/platform_integration/#-dont-forget-the-template-parameter"
  },"130": {
    "doc": "üîß Platform Integration",
    "title": "‚úÖ Correct Template Parameter",
    "content": "| 1 2 3 4 . | // CORRECT - pass your class as template parameter class MyBus : public as5047u::SpiInterface&lt;MyBus&gt; { // ‚úÖ // ... }; . | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#-correct-template-parameter",
    
    "relUrl": "/docs/platform_integration/#-correct-template-parameter"
  },"131": {
    "doc": "üîß Platform Integration",
    "title": "‚ö†Ô∏è Important: AS5047U SPI Pin Mapping",
    "content": "The AS5047U uses a unique SPI pin mapping: . | MCU MOSI ‚Üí AS5047U MISO (data from MCU to sensor) | MCU MISO ‚Üí AS5047U MOSI (data from sensor to MCU) | . This is opposite to standard SPI naming. Make sure your wiring matches this! . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#%EF%B8%8F-important-as5047u-spi-pin-mapping",
    
    "relUrl": "/docs/platform_integration/#Ô∏è-important-as5047u-spi-pin-mapping"
  },"132": {
    "doc": "üîß Platform Integration",
    "title": "Testing Your Implementation",
    "content": "After implementing the interface, test it: . | 1 2 3 4 5 6 . | MyPlatformSPI spi(/* your config */); as5047u::AS5047U encoder(spi, FrameFormat::SPI_24); // Test basic operations uint16_t angle = encoder.GetAngle(); uint8_t agc = encoder.GetAGC(); . | . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#testing-your-implementation",
    
    "relUrl": "/docs/platform_integration/#testing-your-implementation"
  },"133": {
    "doc": "üîß Platform Integration",
    "title": "Next Steps",
    "content": ". | See Configuration for driver configuration options | Check Examples for complete usage examples | Review API Reference for all available methods | . Navigation ‚¨ÖÔ∏è Hardware Setup | Next: Configuration ‚û°Ô∏è . ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/#next-steps",
    
    "relUrl": "/docs/platform_integration/#next-steps"
  },"134": {
    "doc": "üîß Platform Integration",
    "title": "üîß Platform Integration",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/platform_integration/",
    
    "relUrl": "/docs/platform_integration/"
  },"135": {
    "doc": "‚ö° Quick Start",
    "title": "Quick Start",
    "content": "This guide will get you up and running with the AS5047U driver in just a few steps. ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#quick-start",
    
    "relUrl": "/docs/quickstart/#quick-start"
  },"136": {
    "doc": "‚ö° Quick Start",
    "title": "Prerequisites",
    "content": ". | Driver installed | Hardware wired | SPI interface implemented | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#prerequisites",
    
    "relUrl": "/docs/quickstart/#prerequisites"
  },"137": {
    "doc": "‚ö° Quick Start",
    "title": "Minimal Example",
    "content": "Here‚Äôs a complete working example: . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 . | #include \"as5047u.hpp\" // 1. Implement the SPI interface class MySpi : public as5047u::SpiInterface&lt;MySpi&gt; { public: void transfer(const uint8_t* tx, uint8_t* rx, size_t len) { // Your SPI transfer implementation // Assert CS, transfer data, deassert CS } }; // 2. Create instances MySpi spi; as5047u::AS5047U encoder(spi, FrameFormat::SPI_24); // 24-bit frames with CRC // 3. Read angle uint16_t angle = encoder.GetAngle(); // compensated angle (0-16383) float angle_deg = angle * 360.0f / 16384.0f; // convert to degrees // 4. Read velocity int16_t vel = encoder.GetVelocity(); // velocity in LSB float vel_dps = encoder.GetVelocityDegPerSec(); // velocity in deg/s // 5. Diagnostics uint8_t agc = encoder.GetAGC(); // AGC value (0-255) uint16_t mag = encoder.GetMagnitude(); // magnetic magnitude uint16_t errors = encoder.GetErrorFlags(); // error flags . | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#minimal-example",
    
    "relUrl": "/docs/quickstart/#minimal-example"
  },"138": {
    "doc": "‚ö° Quick Start",
    "title": "Step-by-Step Explanation",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#step-by-step-explanation",
    
    "relUrl": "/docs/quickstart/#step-by-step-explanation"
  },"139": {
    "doc": "‚ö° Quick Start",
    "title": "Step 1: Include the Header",
    "content": "| 1 . | #include \"as5047u.hpp\" . | . This includes the main driver class and all necessary types. ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#step-1-include-the-header",
    
    "relUrl": "/docs/quickstart/#step-1-include-the-header"
  },"140": {
    "doc": "‚ö° Quick Start",
    "title": "Step 2: Implement the SPI Interface",
    "content": "You need to implement the SpiInterface for your platform. See Platform Integration for detailed examples. | 1 2 3 4 5 6 7 8 . | class MySpi : public as5047u::SpiInterface&lt;MySpi&gt; { public: void transfer(const uint8_t* tx, uint8_t* rx, size_t len) { // Assert chip select // Perform SPI transfer // Deassert chip select } }; . | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#step-2-implement-the-spi-interface",
    
    "relUrl": "/docs/quickstart/#step-2-implement-the-spi-interface"
  },"141": {
    "doc": "‚ö° Quick Start",
    "title": "Step 3: Create Driver Instance",
    "content": "| 1 2 . | MySpi spi; as5047u::AS5047U encoder(spi, FrameFormat::SPI_24); . | . The constructor takes: . | A reference to your SPI interface implementation | The SPI frame format: SPI_16, SPI_24 (with CRC), or SPI_32 (with CRC) | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#step-3-create-driver-instance",
    
    "relUrl": "/docs/quickstart/#step-3-create-driver-instance"
  },"142": {
    "doc": "‚ö° Quick Start",
    "title": "Step 4: Read Angle",
    "content": "| 1 . | uint16_t angle = encoder.GetAngle(); // 14-bit angle (0-16383) . | . The angle is returned as a 14-bit value (0-16383), where 0 = 0¬∞ and 16383 = 360¬∞. ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#step-4-read-angle",
    
    "relUrl": "/docs/quickstart/#step-4-read-angle"
  },"143": {
    "doc": "‚ö° Quick Start",
    "title": "Step 5: Convert to Degrees",
    "content": "| 1 . | float angle_deg = angle * 360.0f / 16384.0f; . | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#step-5-convert-to-degrees",
    
    "relUrl": "/docs/quickstart/#step-5-convert-to-degrees"
  },"144": {
    "doc": "‚ö° Quick Start",
    "title": "Step 6: Read Velocity",
    "content": "| 1 2 3 . | int16_t vel = encoder.GetVelocity(); // LSB units float vel_dps = encoder.GetVelocityDegPerSec(); // degrees/second float vel_rpm = encoder.GetVelocityRPM(); // RPM . | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#step-6-read-velocity",
    
    "relUrl": "/docs/quickstart/#step-6-read-velocity"
  },"145": {
    "doc": "‚ö° Quick Start",
    "title": "Step 7: Check Diagnostics",
    "content": "| 1 2 3 . | uint8_t agc = encoder.GetAGC(); // Automatic Gain Control (0-255) uint16_t mag = encoder.GetMagnitude(); // Magnetic field magnitude uint16_t errors = encoder.GetErrorFlags(); // Error flags . | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#step-7-check-diagnostics",
    
    "relUrl": "/docs/quickstart/#step-7-check-diagnostics"
  },"146": {
    "doc": "‚ö° Quick Start",
    "title": "Complete Example with Error Handling",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 . | #include \"as5047u.hpp\" class MySpi : public as5047u::SpiInterface&lt;MySpi&gt; { // ... SPI implementation }; void app_main() { MySpi spi; as5047u::AS5047U encoder(spi, FrameFormat::SPI_24); while (true) { // Read angle with retry on CRC errors uint16_t angle = encoder.GetAngle(3); // 3 retries // Check for errors AS5047U_Error errors = encoder.GetStickyErrorFlags(); if (errors != AS5047U_Error::None) { printf(\"Error detected: 0x%04X\\n\", static_cast&lt;uint16_t&gt;(errors)); } // Read diagnostics uint8_t agc = encoder.GetAGC(); uint16_t mag = encoder.GetMagnitude(); printf(\"Angle: %u (%.2f¬∞), AGC: %u, Mag: %u\\n\", angle, angle * 360.0f / 16384.0f, agc, mag); vTaskDelay(pdMS_TO_TICKS(100)); } } . | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#complete-example-with-error-handling",
    
    "relUrl": "/docs/quickstart/#complete-example-with-error-handling"
  },"147": {
    "doc": "‚ö° Quick Start",
    "title": "Expected Output",
    "content": "When running this example, you should see: . | 1 2 3 . | Angle: 8192 (180.00¬∞), AGC: 128, Mag: 8192 Angle: 8200 (180.18¬∞), AGC: 128, Mag: 8192 Angle: 8208 (180.35¬∞), AGC: 128, Mag: 8192 . | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#expected-output",
    
    "relUrl": "/docs/quickstart/#expected-output"
  },"148": {
    "doc": "‚ö° Quick Start",
    "title": "Troubleshooting",
    "content": "If you encounter issues: . | Compilation errors: Check that you‚Äôve implemented the transfer() method in your SPI interface | CRC errors: Verify SPI connections and try increasing retry count | Zero readings: Check magnet placement and field strength | See: Troubleshooting for common issues | . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#troubleshooting",
    
    "relUrl": "/docs/quickstart/#troubleshooting"
  },"149": {
    "doc": "‚ö° Quick Start",
    "title": "Next Steps",
    "content": ". | Explore Examples for more advanced usage | Review the API Reference for all available methods | Check Configuration for customization options | . Navigation ‚¨ÖÔ∏è Installation | Next: Hardware Setup ‚û°Ô∏è | Back to Index . ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/#next-steps",
    
    "relUrl": "/docs/quickstart/#next-steps"
  },"150": {
    "doc": "‚ö° Quick Start",
    "title": "‚ö° Quick Start",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/quickstart/",
    
    "relUrl": "/docs/quickstart/"
  },"151": {
    "doc": "üêõ Troubleshooting",
    "title": "Troubleshooting",
    "content": "This guide helps you diagnose and resolve common issues when using the AS5047U driver. ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#troubleshooting",
    
    "relUrl": "/docs/troubleshooting/#troubleshooting"
  },"152": {
    "doc": "üêõ Troubleshooting",
    "title": "Common Error Messages",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#common-error-messages",
    
    "relUrl": "/docs/troubleshooting/#common-error-messages"
  },"153": {
    "doc": "üêõ Troubleshooting",
    "title": "Error: CRC Errors",
    "content": "Symptoms: . | Frequent CRC errors when reading angle | GetErrorFlags() returns CrcError flag | Unreliable angle readings | . Causes: . | SPI signal integrity issues (noise, reflections) | Incorrect SPI mode or timing | Loose connections | SPI speed too high | Power supply noise | . Solutions: . | Reduce SPI Speed: Try lowering SPI frequency (e.g., 1-2 MHz instead of 10 MHz) | Check SPI Mode: Ensure SPI Mode 1 (CPOL=0, CPHA=1) or Mode 3 (CPOL=1, CPHA=1) | Enable Retries: Use retry parameter: encoder.GetAngle(3) for automatic retry | Verify Connections: Check all SPI connections are secure | Add Decoupling: Ensure proper decoupling capacitors (100nF + 10¬µF) near VDD | Check Ground: Verify good ground connection between MCU and sensor | Use 24-bit Frames: Switch to FrameFormat::SPI_24 for CRC protection | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#error-crc-errors",
    
    "relUrl": "/docs/troubleshooting/#error-crc-errors"
  },"154": {
    "doc": "üêõ Troubleshooting",
    "title": "Error: Framing Errors",
    "content": "Symptoms: . | GetErrorFlags() returns FramingError flag | Communication failures | . Causes: . | Incorrect SPI frame format | CS timing issues | SPI transaction length mismatch | . Solutions: . | Check Frame Format: Ensure frame format matches sensor configuration | Verify CS Timing: Check chip select assertion/deassertion timing | Review SPI Implementation: Ensure transfer() method handles CS correctly | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#error-framing-errors",
    
    "relUrl": "/docs/troubleshooting/#error-framing-errors"
  },"155": {
    "doc": "üêõ Troubleshooting",
    "title": "Error: AGC Warning",
    "content": "Symptoms: . | GetErrorFlags() returns AgcWarning flag | AGC value at 0 or 255 | Unreliable readings | . Causes: . | Magnet too close or too far from sensor | Weak magnetic field | Stray magnetic fields interfering | . Solutions: . | Check Air Gap: Adjust magnet distance (0.5-3.0 mm recommended, 1.0 mm typical) | Verify Magnet: Ensure diametrically magnetized magnet (6-12 mm diameter) | Check Field Strength: Magnetic field should be 30-100 mT at sensor surface | Remove Interference: Keep magnet away from ferromagnetic materials and motors | Check Alignment: Ensure magnet is centered above sensor die | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#error-agc-warning",
    
    "relUrl": "/docs/troubleshooting/#error-agc-warning"
  },"156": {
    "doc": "üêõ Troubleshooting",
    "title": "Error: Magnitude Half Warning",
    "content": "Symptoms: . | GetErrorFlags() returns MagHalf flag | Magnetic field magnitude is half of regulated value | . Causes: . | Magnet too far from sensor | Weak magnetic field | Incorrect magnet type | . Solutions: . | Reduce Air Gap: Move magnet closer to sensor (within 0.5-3.0 mm range) | Check Magnet Strength: Verify magnet provides adequate field (30-100 mT) | Verify Magnet Type: Ensure diametrically magnetized (2-pole) magnet | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#error-magnitude-half-warning",
    
    "relUrl": "/docs/troubleshooting/#error-magnitude-half-warning"
  },"157": {
    "doc": "üêõ Troubleshooting",
    "title": "Hardware Issues",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#hardware-issues",
    
    "relUrl": "/docs/troubleshooting/#hardware-issues"
  },"158": {
    "doc": "üêõ Troubleshooting",
    "title": "Device Not Responding",
    "content": "Symptoms: . | No response from sensor | All readings return 0 or invalid values | SPI communication fails | . Checklist: . | Verify power supply voltage is 2.7V - 3.6V (3.3V typical) | Check all connections are secure (VDD, GND, CLK, MISO, MOSI, CS) | Verify SPI pin mapping (AS5047U uses reversed MISO/MOSI naming) | Check CS line is properly controlled (active low) | Verify SPI mode is correct (Mode 1 or Mode 3) | Use oscilloscope/logic analyzer to verify bus activity | Check for short circuits or incorrect wiring | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#device-not-responding",
    
    "relUrl": "/docs/troubleshooting/#device-not-responding"
  },"159": {
    "doc": "üêõ Troubleshooting",
    "title": "Communication Errors",
    "content": "Symptoms: . | Timeout errors | CRC/checksum errors | Inconsistent readings | . Solutions: . | Check Bus Speed: Ensure SPI speed is within specifications (up to 10 MHz, 4 MHz recommended) | Verify Signal Integrity: Check for noise, reflections, or signal degradation | Ensure Proper Termination: Verify proper bus termination | Check for Loose Connections: Inspect all connections | Reduce SPI Speed: Try lower frequency if issues persist | Add Pull-ups: Ensure proper pull-up resistors if needed | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#communication-errors",
    
    "relUrl": "/docs/troubleshooting/#communication-errors"
  },"160": {
    "doc": "üêõ Troubleshooting",
    "title": "Incorrect Angle Readings",
    "content": "Symptoms: . | Angle values don‚Äôt change when rotating | Angle values jump erratically | Angle values are always zero | . Causes: . | Magnet not properly positioned | Incorrect magnet type | Stray magnetic fields | Sensor not initialized | . Solutions: . | Check Magnet Placement: Verify magnet is centered and at correct distance | Verify Magnet Type: Ensure diametrically magnetized (2-pole) magnet | Check for Interference: Remove sources of stray magnetic fields | Verify Initialization: Ensure SPI bus is properly initialized | Check Error Flags: Read error flags to diagnose specific issues | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#incorrect-angle-readings",
    
    "relUrl": "/docs/troubleshooting/#incorrect-angle-readings"
  },"161": {
    "doc": "üêõ Troubleshooting",
    "title": "Software Issues",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#software-issues",
    
    "relUrl": "/docs/troubleshooting/#software-issues"
  },"162": {
    "doc": "üêõ Troubleshooting",
    "title": "Compilation Errors",
    "content": "Error: ‚ÄúNo matching function‚Äù . Solution: . | Ensure you‚Äôve implemented the transfer() method in your SPI interface | Check method signature matches: void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len) | Verify you‚Äôre inheriting from as5047u::SpiInterface&lt;YourClass&gt; | . Error: ‚ÄúUndefined reference‚Äù . Solution: . | Verify you‚Äôre linking the driver source file (as5047u.cpp) | Check include paths are correct | Ensure C++20 standard is enabled: -std=c++20 | . Error: ‚ÄúTemplate instantiation failed‚Äù . Solution: . | Verify your SPI interface class is properly templated: class MySPI : public as5047u::SpiInterface&lt;MySPI&gt; | Check that all required methods are implemented | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#compilation-errors",
    
    "relUrl": "/docs/troubleshooting/#compilation-errors"
  },"163": {
    "doc": "üêõ Troubleshooting",
    "title": "Runtime Errors",
    "content": "Initialization Fails . Checklist: . | SPI bus interface is properly initialized | Hardware connections are correct | SPI configuration matches sensor requirements | Device is powered and ready | CS pin is correctly configured | . Unexpected Behavior . Checklist: . | Verify configuration matches your use case | Check for timing issues (add delays if needed) | Review error handling code | Verify frame format is correct | Check error flags for diagnostic information | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#runtime-errors",
    
    "relUrl": "/docs/troubleshooting/#runtime-errors"
  },"164": {
    "doc": "üêõ Troubleshooting",
    "title": "Debugging Tips",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#debugging-tips",
    
    "relUrl": "/docs/troubleshooting/#debugging-tips"
  },"165": {
    "doc": "üêõ Troubleshooting",
    "title": "Enable Debug Output",
    "content": "Add debug prints to your SPI implementation: . | 1 2 3 4 . | void transfer(const uint8_t* tx, uint8_t* rx, std::size_t len) { printf(\"SPI Transfer: len=%zu\\n\", len); // ... your SPI code } . | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#enable-debug-output",
    
    "relUrl": "/docs/troubleshooting/#enable-debug-output"
  },"166": {
    "doc": "üêõ Troubleshooting",
    "title": "Use DumpStatus()",
    "content": "Print comprehensive sensor status: . | 1 . | encoder.DumpStatus(); . | . This prints angle, velocity, AGC, magnitude, and error flags. ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#use-dumpstatus",
    
    "relUrl": "/docs/troubleshooting/#use-dumpstatus"
  },"167": {
    "doc": "üêõ Troubleshooting",
    "title": "Check Error Flags",
    "content": "Always check error flags after operations: . | 1 2 3 4 5 . | uint16_t angle = encoder.GetAngle(); AS5047U_Error errors = encoder.GetStickyErrorFlags(); if (errors != AS5047U_Error::None) { printf(\"Errors: 0x%04X\\n\", static_cast&lt;uint16_t&gt;(errors)); } . | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#check-error-flags",
    
    "relUrl": "/docs/troubleshooting/#check-error-flags"
  },"168": {
    "doc": "üêõ Troubleshooting",
    "title": "Use a Logic Analyzer",
    "content": "For bus communication issues, a logic analyzer can help: . | Verify correct protocol timing | Check for signal integrity issues | Validate data being sent/received | Debug CS timing issues | . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#use-a-logic-analyzer",
    
    "relUrl": "/docs/troubleshooting/#use-a-logic-analyzer"
  },"169": {
    "doc": "üêõ Troubleshooting",
    "title": "Verify SPI Pin Mapping",
    "content": "Important: AS5047U uses reversed SPI pin naming: . | MCU MOSI ‚Üí AS5047U MISO (data from MCU to sensor) | MCU MISO ‚Üí AS5047U MOSI (data from sensor to MCU) | . Double-check your wiring matches this! . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#verify-spi-pin-mapping",
    
    "relUrl": "/docs/troubleshooting/#verify-spi-pin-mapping"
  },"170": {
    "doc": "üêõ Troubleshooting",
    "title": "FAQ",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#faq",
    
    "relUrl": "/docs/troubleshooting/#faq"
  },"171": {
    "doc": "üêõ Troubleshooting",
    "title": "Q: What SPI frame format should I use?",
    "content": "A: For most applications, use FrameFormat::SPI_24 - it provides CRC protection with good throughput. Use SPI_16 for maximum speed (no CRC), or SPI_32 for daisy-chain applications. ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#q-what-spi-frame-format-should-i-use",
    
    "relUrl": "/docs/troubleshooting/#q-what-spi-frame-format-should-i-use"
  },"172": {
    "doc": "üêõ Troubleshooting",
    "title": "Q: How do I know if my magnet is positioned correctly?",
    "content": "A: Check the AGC value - it should be between 10-245 (not at limits 0 or 255). Also check magnitude - it should be in a reasonable range (typically 5000-15000). Use DumpStatus() to see all diagnostics. ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#q-how-do-i-know-if-my-magnet-is-positioned-correctly",
    
    "relUrl": "/docs/troubleshooting/#q-how-do-i-know-if-my-magnet-is-positioned-correctly"
  },"173": {
    "doc": "üêõ Troubleshooting",
    "title": "Q: Can I use multiple AS5047U sensors on the same SPI bus?",
    "content": "A: Yes, use FrameFormat::SPI_32 with different pad bytes for each sensor. Each sensor needs its own CS line. ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#q-can-i-use-multiple-as5047u-sensors-on-the-same-spi-bus",
    
    "relUrl": "/docs/troubleshooting/#q-can-i-use-multiple-as5047u-sensors-on-the-same-spi-bus"
  },"174": {
    "doc": "üêõ Troubleshooting",
    "title": "Q: Why are my angle readings noisy?",
    "content": "A: Enable adaptive filtering: encoder.SetAdaptiveFilter(true) and adjust filter parameters. Also check magnet placement and ensure proper decoupling capacitors. ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#q-why-are-my-angle-readings-noisy",
    
    "relUrl": "/docs/troubleshooting/#q-why-are-my-angle-readings-noisy"
  },"175": {
    "doc": "üêõ Troubleshooting",
    "title": "Q: How do I calibrate the zero position?",
    "content": "A: Read the current angle when at your desired zero position, then call encoder.SetZeroPosition(current_angle). See Example 7 for details. ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#q-how-do-i-calibrate-the-zero-position",
    
    "relUrl": "/docs/troubleshooting/#q-how-do-i-calibrate-the-zero-position"
  },"176": {
    "doc": "üêõ Troubleshooting",
    "title": "Q: What happens if I program OTP incorrectly?",
    "content": "A: OTP programming is irreversible. If you program incorrect settings, you cannot change them. Always verify settings before programming OTP. ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#q-what-happens-if-i-program-otp-incorrectly",
    
    "relUrl": "/docs/troubleshooting/#q-what-happens-if-i-program-otp-incorrectly"
  },"177": {
    "doc": "üêõ Troubleshooting",
    "title": "Getting More Help",
    "content": "If you‚Äôre still experiencing issues: . | Check the API Reference for method details | Review Examples for working code | Search existing issues on GitHub | Open a new issue with: . | Description of the problem | Steps to reproduce | Hardware setup details (MCU, wiring, magnet type) | Error messages/logs | Output from DumpStatus() | . | . Navigation ‚¨ÖÔ∏è Examples | Back to Index . ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/#getting-more-help",
    
    "relUrl": "/docs/troubleshooting/#getting-more-help"
  },"178": {
    "doc": "üêõ Troubleshooting",
    "title": "üêõ Troubleshooting",
    "content": " ",
    "url": "/hf-as5047u-driver/development/docs/troubleshooting/",
    
    "relUrl": "/docs/troubleshooting/"
  },"179": {
    "doc": "AS5047U ESP32-C6 Examples",
    "title": "AS5047U ESP32-C6 Examples",
    "content": "# AS5047U ESP32-C6 Examples This directory contains comprehensive examples demonstrating the AS5047U driver on ESP32-C6 platform. ## üéØ Overview The ESP32-C6 examples showcase real-world usage of the AS5047U magnetic encoder with: - **Hardware-specific HAL** implementation for ESP32-C6 - **Multiple example applications** covering different use cases - **Automated build system** with configurable app types - **Comprehensive documentation** for each example - **Production-ready code** with proper error handling ## üîß Hardware Requirements ### ESP32-C6 Development Board - ESP32-C6-DevKitC-1 or compatible - USB-C cable for programming and power ### AS5047U Connections | AS5047U Pin | ESP32-C6 GPIO | Function |-------------|---------------|----------| MISO | GPIO2 | SPI Data In | MOSI | GPIO7 | SPI Data Out | SCLK | GPIO6 | SPI Clock | CS | GPIO10 | Chip Select | VDD | 3.3V | Logic Supply | GND | GND | Ground | **Note:** The default SPI configuration uses mode 1 (CPOL=0, CPHA=1) at 4MHz. ## üöÄ Quick Start ### 1. Prerequisites ```bash # Install ESP-IDF v5.5 curl -fsSL https://raw.githubusercontent.com/espressif/esp-idf/master/tools/install.sh | bash source ~/esp/esp-idf/export.sh # Verify installation idf.py --version ``` ### 2. Setup Repository ```bash # Clone and setup git clone --recursive https://github.com/n3b3x/hf-as5047u-driver.git cd hf-as5047u-driver/examples/esp32 # Initialize build environment ./scripts/setup_repo.sh ``` ### 3. Build and Flash ```bash # Build driver integration test (default) ./scripts/build_app.sh driver_integration_test Release # Flash to ESP32-C6 ./scripts/flash_app.sh driver_integration_test Release # Monitor output idf.py monitor ``` ## üì± Available Examples ### üü¢ Test Suite #### `driver_integration_test` **Comprehensive Driver Integration Test Suite** - Complete driver API validation (30+ tests) - Multiple test sections covering all functionality - Initialization, angle/velocity reading, diagnostics - Frame format testing (16/24/32-bit) - Configuration and error handling - FreeRTOS task-based test execution - GPIO14 progress indicator - Automatic pass/fail tracking - No actual hardware required (driver test only) **Build:** ```bash ./scripts/build_app.sh driver_integration_test Release ``` ### üü° Basic Examples #### `basic_angle_reading` **Basic Angle Reading Example** - Simple angle reading loop - Angle in LSB and degrees - AGC and magnitude diagnostics - Error flag monitoring - Real hardware testing **Build:** ```bash ./scripts/build_app.sh basic_angle_reading Release ``` #### `velocity_reading` **Velocity Reading Example** - Velocity reading in multiple units - Degrees per second, radians per second, RPM - Real hardware testing **Build:** ```bash ./scripts/build_app.sh velocity_reading Release ``` #### `configuration_example` **Configuration Example** - ABI output configuration - UVW commutation setup - PWM output configuration - Zero position and direction setting - Real hardware testing **Build:** ```bash ./scripts/build_app.sh configuration_example Release ``` #### `full_features` **Comprehensive Example** - All sensor features enabled - Angle, velocity, diagnostics - ABI, UVW, PWM configuration - DAEC and filter settings - OTP programming - Real hardware testing **Build:** ```bash ./scripts/build_app.sh full_features Release ``` ## üî® Building Examples ### Using Build Scripts (Recommended) ```bash # List available app types ./scripts/build_app.sh list # Build specific app ./scripts/build_app.sh # Examples: ./scripts/build_app.sh driver_integration_test Release ./scripts/build_app.sh basic_angle_reading Debug ``` ### Using ESP-IDF Directly ```bash # Set app type and build type idf.py build -DAPP_TYPE=driver_integration_test -DBUILD_TYPE=Release # Flash idf.py flash # Monitor idf.py monitor ``` ## üìä Test Framework All test examples use a standardized test framework with: - **Test result tracking** - Automatic pass/fail counting - **Execution timing** - Performance measurement - **FreeRTOS task execution** - Isolated test environments - **GPIO14 progress indicator** - Visual test progression - **Standardized logging** - Consistent output format ### Test Framework Features - `RUN_TEST(test_func)` - Run test inline - `RUN_TEST_IN_TASK(name, func, stack_size, priority)` - Run test in FreeRTOS task - `RUN_TEST_SECTION_IF_ENABLED(enabled, section_name, ...)` - Conditional test sections - `g_test_results` - Global test results tracking ## üîå Hardware Configuration ### SPI Configuration The default SPI configuration can be modified in the example files: ```cpp Esp32As5047uBus::SPIConfig config; config.miso_pin = GPIO_NUM_2; // MISO pin config.mosi_pin = GPIO_NUM_7; // MOSI pin config.sclk_pin = GPIO_NUM_6; // SCLK pin config.cs_pin = GPIO_NUM_10; // CS pin config.frequency = 4000000; // SPI frequency (4MHz) config.mode = 1; // SPI mode (1: CPOL=0, CPHA=1) ``` ### Pin Configuration | Function | Default GPIO | Notes |----------|-------------|-------| SPI MISO | GPIO2 | Can be changed in code | SPI MOSI | GPIO7 | Can be changed in code | SPI SCLK | GPIO6 | Can be changed in code | SPI CS | GPIO10 | Can be changed in code | Test Progress | GPIO14 | Used by test framework | ### Frame Formats The AS5047U supports three SPI frame formats: - **SPI_16** - 16-bit frames (no CRC, high-throughput mode) - **SPI_24** - 24-bit frames (includes 8-bit CRC for reliability) - **Recommended** - **SPI_32** - 32-bit frames (includes 8-bit CRC and 8-bit pad for daisy-chain) ## üìö Documentation For more detailed documentation, see: - [Main Driver README](/hf-as5047u-driver/development/) - [Setup Guide](../../docs/setup.md) - [Usage Guide](../../docs/usage.md) - [Examples Guide](/hf-as5047u-driver/development/docs/examples/) - [Building Guide](../../docs/building.md) ## üêõ Troubleshooting ### Build Issues **Error: \"APP_TYPE not defined\"** - Use the build scripts: `./scripts/build_app.sh ` - Or set manually: `idf.py build -DAPP_TYPE=driver_integration_test -DBUILD_TYPE=Release` **Error: \"Failed to read valid app types from app_config.yml\"** - Ensure the scripts submodule is initialized: `git submodule update --init --recursive` - Check that `scripts/get_app_info.py` exists ### Runtime Issues **SPI Communication Errors** - Check wiring connections (MISO, MOSI, SCLK, CS, GND, VDD) - Verify SPI mode (default is mode 1: CPOL=0, CPHA=1) - Check SPI frequency (default is 4MHz) - Verify chip select is properly configured **No Angle Data** - Ensure encoder is powered (3.3V) - Check magnetic field is present (magnitude should be > 0) - Verify SPI communication (check error flags) - Ensure proper SPI frame format (24-bit recommended) **CRC Errors** - Use 24-bit or 32-bit frame format (includes CRC) - Check SPI signal integrity - Verify SPI timing and frequency **Initialization Failures** - Check SPI bus initialization - Verify chip select pin configuration - Ensure proper power supply (3.3V) - Check for SPI bus conflicts ## üìù License See the main driver [LICENSE](/hf-as5047u-driver/development/LICENSE) file. ## ü§ù Contributing See the main driver [Contributing Guide](/hf-as5047u-driver/development/docs/). --- **For questions or issues, please open an issue on GitHub.** ",
    "url": "/hf-as5047u-driver/development/examples/esp32/",
    
    "relUrl": "/examples/esp32/"
  }
}
